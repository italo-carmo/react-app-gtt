{"version":3,"file":"static/js/32.a5eec440.chunk.js","mappings":"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","sources":["views/timeline-exercicios/Main.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport styles from './styles.css'\nimport {\n  CButton,\n  CCard,\n\n} from '@coreui/react'\nimport useApi from 'src/services/Api'\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { forwardRef } from 'react'\nimport LoadingSpinner from 'src/components/Loading'\n\n\nconst Etapas = () => {\n\n  const [etapas, setEtapas] = useState([])\n  const [etapasFiltered, setEtapasFiltered] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [exercicios, setExercicios] = useState([])\n  const [exerciciosPorMes, setExerciciosPorMes] = useState({})\n  \n\n  let meses = [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"]\n  let dias = [\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\"]\n  const Api = useApi()\n\n  function formatarNumero(numero) {\n    // Converte o número para uma string e substitui o ponto por vírgula\n    const numeroString = numero.toFixed(2).replace('.', ',');\n  \n    // Separa a parte inteira da parte decimal\n    const partes = numeroString.split(',');\n  \n    // Adiciona ponto como separador de milhares na parte inteira\n    partes[0] = partes[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n  \n    // Junta as partes novamente\n    const numeroFormatado = partes.join(',');\n  \n    return numeroFormatado;\n  }\n\n  const splitData = (stringData) => {\n    // Dividir a string em partes (ano, mês, dia)\n    const partesData = stringData.split(\"-\");\n    const ano = parseInt(partesData[0], 10);\n    const mes = parseInt(partesData[1], 10) - 1; // Subtraia 1 do mês (0 para janeiro, 1 para fevereiro, etc.)\n    const dia = parseInt(partesData[2], 10);\n    return [ano, mes, dia]\n  }\n\n  const getExercicios = async () => {\n    let res = await Api.getExercicios();\n    if (!res.error) {\n      const exerciciosData = res.data;\n  \n      const exerciciosPorMesCopy = meses.map(() => []); // Cria uma matriz vazia para armazenar os exercícios de cada mês\n  \n      exerciciosData.forEach(exercicio => {\n        const dataInicio = new Date(exercicio.data_inicio + 'T06:00:00Z');\n        const dataFim = new Date(exercicio.data_fim + 'T06:00:00Z');\n  \n        // Verifica se o exercício abrange mais de um mês\n        const primeiroMes = dataInicio.getMonth();\n        const ultimoMes = dataFim.getMonth();\n  \n        // Adiciona o exercício a cada mês entre o primeiro e o último (inclusive)\n        for (let i = primeiroMes; i <= ultimoMes; i++) {\n          exerciciosPorMesCopy[i].push(exercicio);\n        }\n      });\n  \n      setExerciciosPorMes(exerciciosPorMesCopy);\n    }\n  };\n  \n  \n\n  function gerarCorAleatoria() {\n    let cor;\n    do {\n      // Gera valores aleatórios para os canais de cor vermelho, verde e azul\n      const r = Math.floor(Math.random() * 256); // Red (0-255)\n      const g = Math.floor(Math.random() * 256); // Green (0-255)\n      const b = Math.floor(Math.random() * 256); // Blue (0-255)\n  \n      // Garante que a cor resultante seja mais clara\n      const somaCores = r + g + b;\n      const minSomaCores = 384; // Este é um terço de 255 * 3 (o valor máximo para cada canal)\n      if (somaCores >= minSomaCores) {\n        // Converte os valores para representação hexadecimal\n        cor = '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n      }\n    } while (!cor); // Repete o processo até encontrar uma cor válida\n  \n    return cor;\n  }\n  \n  \n  \n  useEffect(()=>{\n    getExercicios()\n  },[])\n\n\n  return (\n    <>\n      <CCard className=\"mb-6\" style={{flexDirection: 'column' }}>\n    <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n    <div style={{maxWidth: '95%', overflowX: 'auto', marginTop:30}}>\n    <table style={{marginBottom: 20}}>\n  <tr>\n    <th>\n      Mês\n    </th>\n    <th>\n      Nome\n    </th>\n    {dias.map(i => {\n      return <th style={{fontSize: '0.6vw'}}>{i}</th>\n    })}\n  </tr>\n  {meses.map((mes, index) => {\n    const exerciciosDoMes = exerciciosPorMes[index] || [];\n\n    const rowspan = exerciciosDoMes.length > 0 ? exerciciosDoMes.length : 1;\n\n      // Ordena os exercícios pelo data_inicio\n    exerciciosDoMes.sort((a, b) => {\n      return new Date(a.data_inicio) - new Date(b.data_inicio);\n    });\n\n    return (\n      <React.Fragment key={index}>\n        {exerciciosDoMes.map((exercicio, idx) => {\n          let cor = gerarCorAleatoria();\n\n          // Converte as datas de início e fim do exercício para objetos Date\n          let [ano_inicio, mes_inicio, dia_inicio] = splitData(exercicio.data_inicio)\n          let [ano_fim, mes_fim, dia_fim] = splitData(exercicio.data_fim)\n          const dataInicio = new Date(Date.UTC(ano_inicio, mes_inicio, dia_inicio))\n          const dataFim = new Date(Date.UTC(ano_fim, mes_fim, dia_fim));\n          return (\n            <React.Fragment key={idx}>\n              {/* Renderiza apenas se o exercício estiver dentro do intervalo do mês */}\n              { (\n                <tr>\n                  {idx === 0 && <td style={{backgroundColor: '#d6dce9'}} rowSpan={rowspan}>{mes}</td>}\n                  <td style={{ backgroundColor: cor, fontWeight: 'bold' }}>{exercicio.nome}</td>\n                  {dias.map(dia => {\n                    let date = new Date()\n                    let data_inicio_dia = new Date(Date.UTC(date.getFullYear(),index, dia, 0, 0, 0))\n                    let data_fim_dia = new Date(Date.UTC(date.getFullYear(),index, dia, 23, 59, 59))\n                    if(data_inicio_dia <= dataFim && data_fim_dia >= dataInicio) {\n                      var dentroDoIntervalo = true\n                    }\n                    if(dia == 6) {\n                      console.log(exercicio.nome)\n                      console.log('Inicio Dia: '+data_inicio_dia.toISOString())\n                      console.log(dataFim.toISOString())\n                      console.log('Fim Dia: '+data_fim_dia.toISOString())\n                      console.log(dataInicio.toISOString())\n                      console.log(dentroDoIntervalo)\n                    }\n                      \n                    return (\n                      <td key={dia} style={{ fontSize: '0.6vw', fontWeight: 'bold', backgroundColor: dentroDoIntervalo ? cor : '' }}>\n                        {dentroDoIntervalo ? dia : ''}\n                      </td>\n                    );\n                  })}\n                </tr>\n              )}\n            </React.Fragment>\n          );\n        })}\n        {exerciciosDoMes.length === 0 && (\n          <tr>\n            <td style={{backgroundColor: '#d6dce9'}}>{mes}</td>\n            <td></td>\n            {dias.map(() => <td></td>)}\n          </tr>\n        )}\n      </React.Fragment>\n    );\n  })}\n</table>\n\n    </div>\n    </div>\n\n        {loading &&\n                <div  style={{\n                  position: 'absolute',\n                  left: '50%',\n                  top: '80%',\n                  transform: 'translate(-50%, -50%)',\n                  zIndex:99\n                }}>\n                  <LoadingSpinner black={true} width=\"50px\" />\n                </div>\n        }\n      </CCard>\n     \n    </>\n  )\n}\n\nexport default Etapas\n"],"names":["Etapas","etapas","setEtapas","useState","etapasFiltered","setEtapasFiltered","loading","setLoading","exercicios","setExercicios","exerciciosPorMes","setExerciciosPorMes","meses","dias","Api","useApi","splitData","stringData","partesData","split","parseInt","useEffect","async","res","getExercicios","error","exerciciosData","data","exerciciosPorMesCopy","map","forEach","exercicio","dataInicio","Date","data_inicio","dataFim","data_fim","primeiroMes","getMonth","ultimoMes","i","push","_jsx","_Fragment","children","_jsxs","CCard","className","style","flexDirection","display","alignItems","justifyContent","maxWidth","overflowX","marginTop","marginBottom","fontSize","mes","index","exerciciosDoMes","rowspan","length","sort","a","b","React","idx","cor","r","Math","floor","random","g","toString","slice","gerarCorAleatoria","ano_inicio","mes_inicio","dia_inicio","ano_fim","mes_fim","dia_fim","UTC","backgroundColor","rowSpan","fontWeight","nome","dia","date","data_inicio_dia","getFullYear","data_fim_dia","dentroDoIntervalo","console","log","toISOString","position","left","top","transform","zIndex","LoadingSpinner","black","width"],"sourceRoot":""}