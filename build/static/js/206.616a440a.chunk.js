"use strict";(self.webpackChunkApp_GTT=self.webpackChunkApp_GTT||[]).push([[206],{53206:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(1413),i=n(93433),a=n(74165),s=n(15861),o=n(29439),l=n(72791),c=n(78983),u=n(21933),d=(n(68639),n(5016)),p=n(59513),h=n.n(p),g=n(80184),m=function(){var e=(0,l.useState)([]),t=(0,o.Z)(e,2),n=t[0],p=t[1],m=(0,l.useState)(""),x=(0,o.Z)(m,2),f=x[0],v=x[1],j=(0,l.useState)(new Date),y=(0,o.Z)(j,2),b=y[0],S=y[1],T=(0,l.useState)(""),w=(0,o.Z)(T,2),Z=(w[0],w[1],(0,l.useState)(0)),C=(0,o.Z)(Z,2),I=(C[0],C[1],(0,l.useState)(!1)),D=(0,o.Z)(I,2),k=D[0],E=(D[1],(0,l.useState)("Simples")),R=(0,o.Z)(E,2),M=R[0],P=R[1],O=(0,l.useState)(new Date),L=(0,o.Z)(O,2),V=(L[0],L[1],(0,l.useState)([])),A=(0,o.Z)(V,2),N=(A[0],A[1],(0,l.useState)(!1)),z=(0,o.Z)(N,2),B=z[0],F=z[1],H=(0,l.useState)(""),U=(0,o.Z)(H,2),G=U[0],W=U[1],_=(0,u.Z)(),K=function(e){e.value;var t=e.onClick;return(0,g.jsx)("img",{style:{cursor:"pointer",marginLeft:5},src:"https://www.1gtt.com.br/app/calendar-black.png",width:"30px",onClick:t})};function X(e){if(isNaN(e)||e<0)return"Invalid input";var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),r=String(t).padStart(2,"0"),i=String(n).padStart(2,"0");return"".concat(r,":").concat(i)}var q=function(e){try{"string"!=typeof e&&(e=e.toISOString());var t=e.split("T"),n=(0,o.Z)(t,2),r=(n[0],n[1].split(":")),i=(0,o.Z)(r,3),a=i[0],s=i[1];i[2];return a+":"+s}catch(l){return"00:00"}},J=function(e){try{"string"!=typeof e&&(e=e.toISOString());var t=e.split("T"),n=(0,o.Z)(t,2),r=n[0],i=(n[1],r.split("-")),a=(0,o.Z)(i,3),s=a[0],l=a[1];return a[2]+"/"+l+"/"+s}catch(c){return"00:00"}};function Q(e){console.log("arredondando: "+e);var t=e/6e4;if(console.log(t),t%5===0)return e;var n=6e4*(5*Math.ceil(t/5));return console.log("retornando: "+n),n}var Y=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.split(","),e.next=3,_.getPlanejamento({rota:t});case 3:if(!(n=e.sent).error){e.next=7;break}return alert(n.error),e.abrupt("return");case 7:return r=[],i=b,n.data.forEach((function(e,t){var n=new Date(i.getTime()+e.tempo),a=72e5;r.push({data:i.toISOString().split("T")[0],origem:e.origem,destino:e.destino,DEP:i.toISOString(),ARR:n.toISOString(),TEV:X(Q(e.tempo)),tempoSolo:X(a)}),i=new Date(n.getTime()+a)})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=3;break}return alert("Rota \xe9 obrigat\xf3ria"),e.abrupt("return");case 3:if(!((t=f.split(",")).length<=1)){e.next=7;break}return alert("Digite ao menos 2 ICAO"),e.abrupt("return");case 7:if(t.every((function(e){return 4===e.length}))){e.next=11;break}return alert("Confira os ICAOS"),e.abrupt("return");case 11:if(b){e.next=14;break}return alert("Data Inicial \xe9 obrigat\xf3ria"),e.abrupt("return");case 14:if(B){e.next=23;break}return e.next=17,Y();case 17:(r=e.sent).rota=f,(s=(0,i.Z)(n)).push(r),e.next=29;break;case 23:return e.next=25,Y();case 25:(o=e.sent).rota=f,(s=(0,i.Z)(n))[G]=o;case 29:p(s),v(t[t.length-1]),F(!1),W("");case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){}),[]);var ee=function(e){var t=e.split(":"),n=(0,o.Z)(t,2),r=n[0],i=n[1];return 60*parseInt(r)*60*1e3+60*parseInt(i)*1e3};var te=function(e,t,r){var a=(0,i.Z)(n);a[e][t].TEV=function(e,t){var n=e.split(":"),r=60*parseInt(n[0])+parseInt(n[1]);r=t?r+5:r-5;var i=(r=Math.max(0,r))%60,a=Math.floor(r/60).toString().padStart(2,"0"),s=i.toString().padStart(2,"0");return"".concat(a,":").concat(s)}(a[e][t].TEV,r),p(a)};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(c.xH,{className:"mb-6",style:{flexDirection:"column",overflowX:"auto",minHeight:500,maxHeight:700},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px",marginTop:"20px",marginLeft:10,marginRight:10},children:[(0,g.jsxs)("div",{style:{marginRight:"20px",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,g.jsx)("label",{children:"Data In\xedcio:"}),(0,g.jsx)("div",{className:"input-obs",style:{marginLeft:5},children:b.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"UTC"})+"Z"}),(0,g.jsx)("div",{style:{zIndex:9999},children:(0,g.jsx)(h(),{selected:b,onChange:function(e){if(e){var t=new Date(e);t.setMinutes(e.getMinutes()-e.getTimezoneOffset()),S(t)}},customInput:(0,g.jsx)(K,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,dateFormat:"LLL",timeZone:"UTC",timeZoneData:[{value:"Etc/UTC",label:"Zulu (GMT 0)"}],utcOffset:0,popperClassName:"datePickerPopper",calendarClassName:"datePickerCalendar"})})]}),(0,g.jsxs)("div",{style:{marginRight:"20px"},children:[(0,g.jsx)("label",{style:{marginRight:5},children:"ROTA:"}),(0,g.jsx)("input",{type:"text",value:f,onKeyPress:function(e){"Enter"===e.key&&$()},onChange:function(e){v(e.target.value.toUpperCase())},style:{width:500}})]}),(0,g.jsx)("div",{className:"buttons",children:(0,g.jsx)("button",{style:{backgroundColor:"green",color:"white",padding:"2px 20px",borderRadius:"5px",border:"none",cursor:"pointer",fontSize:12,marginBottom:5},onClick:function(){return $()},children:B?"Editar":"Adicionar"})})]}),(0,g.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px",marginLeft:10,marginRight:10},children:(0,g.jsxs)("div",{style:{marginRight:"20px"},children:[(0,g.jsx)("label",{style:{marginRight:5},children:"Tripula\xe7\xe3o:"}),(0,g.jsxs)("select",{style:{padding:"5px",borderRadius:"10px",border:"1px solid #000"},value:M,onChange:function(e){P(e.target.value)},children:[(0,g.jsx)("option",{value:"",children:"Selecione"}),["Simples","Composta","Revezamento"].map((function(e){return(0,g.jsx)("option",{value:e,children:e})}))]})]})}),n.map((function(e,t){var a=new Date(e[0].DEP),s=new Date(e[0].DEP);"Simples"==M&&a.setTime(a.getTime()+432e5),"Composta"==M&&a.setTime(a.getTime()+504e5),"Revezamento"==M&&a.setTime(a.getTime()+612e5);for(var l=s;a>l;){var c=l.getHours();(c>22||c<6)&&a.setMilliseconds(a.getMilliseconds()-18e5),l.setMilliseconds(l.getMilliseconds()+36e5)}return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},children:[(0,g.jsxs)("span",{style:{fontWeight:"bold",marginRight:10},children:["DIA ",t+1]}),(0,g.jsx)("img",{onClick:function(){F(!0),W(t),v(e.rota);var n=new Date(e[0].DEP);S(n)},width:"15",height:"15",src:"https://www.1gtt.com.br/app/pen.png"})]}),(0,g.jsxs)("table",{style:{marginBottom:20,zIndex:2,width:"90%"},children:[(0,g.jsx)("thead",{className:"tabela-cabecalho",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Data"}),(0,g.jsx)("th",{children:"Origem"}),(0,g.jsx)("th",{children:"Destino"}),(0,g.jsx)("th",{children:"DEP"}),(0,g.jsx)("th",{children:"ARR"}),(0,g.jsx)("th",{children:"TEV"}),(0,g.jsx)("th",{children:"Tempo Solo"})]})}),e.map((function(s,l){try{if(0==l)var c=s.DEP;else{for(var u=0,d=0,h=0;h<l;h++)d+=ee(e[h].TEV),u+=ee(e[h].tempoSolo);var m=new Date(e[0].DEP);m.setTime(m.getTime()+u+d);c=m}}catch(v){c="00:00"}var x=function(e,t){var n=new Date(e),r=t.split(":"),i=(0,o.Z)(r,2),a=i[0],s=i[1],l=36e5*parseInt(a)+6e4*parseInt(s);return n.setTime(n.getTime()+l),n}(c,s.TEV),f=!1;return x>a&&(f=!0),(0,g.jsxs)("tr",{style:{color:f?"#FF0000":"#000"},children:[(0,g.jsx)("td",{style:{fontWeight:"bold"},children:5==s.TEV.length?J(c):""}),(0,g.jsx)("td",{children:s.origem}),(0,g.jsx)("td",{children:s.destino}),(0,g.jsx)("td",{children:5==s.TEV.length?q(c):""}),(0,g.jsx)("td",{children:5==s.TEV.length?q(x):""}),(0,g.jsx)("td",{children:(0,g.jsxs)("div",{style:{display:"flex"},children:[s.TEV,(0,g.jsx)("img",{width:"20px",height:"20px",src:"https://www.1gtt.com.br/seta-cima.png",onClick:function(){return te(t,l,!0)},style:{marginLeft:5,marginRight:5,cursor:"pointer"}}),(0,g.jsx)("img",{width:"20px",height:"20px",src:"https://www.1gtt.com.br/seta-baixo.png",onClick:function(){return te(t,l,!1)},style:{cursor:"pointer"}})]})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{type:"text",value:s.tempoSolo,onChange:function(a){var s=a.target.value,o=(0,i.Z)(n),c=e.map((function(e,t){return t===l?(0,r.Z)((0,r.Z)({},e),{},{tempoSolo:s}):e}));o[t]=c,p(o)}})})]},l)}))]}),(0,g.jsxs)("span",{style:{fontWeight:"bold",marginBottom:50},children:["Limite da Fadiga: ",J(a)+" "+q(a)]})]})})),k&&(0,g.jsx)("div",{style:{position:"absolute",left:"50%",top:"80%",transform:"translate(-50%, -50%)",zIndex:99},children:(0,g.jsx)(d.Z,{black:!0,width:"50px"})})]})})}}}]);
//# sourceMappingURL=206.616a440a.chunk.js.map