"use strict";(self.webpackChunkApp_GTT=self.webpackChunkApp_GTT||[]).push([[692],{46072:(e,a,r)=>{r.r(a),r.d(a,{default:()=>c});var i=r(69060),s=r(3084),t=r(36856),l=(r(94412),r(30260)),n=r(51560),o=(r(73380),r(54396)),d=r(82496);const c=()=>{(0,n.i6)();const e=(0,i.useRef)(null),[a,r]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[m,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!1),[g,f]=(0,i.useState)(!1),[j,v]=(0,i.useState)([]),[y,b]=(0,i.useState)(!1),[w,N]=(0,i.useState)(!1),[C,S]=(0,i.useState)(!1),[T,F]=(0,i.useState)(""),[k,I]=(0,i.useState)(!1),[R,O]=(0,i.useState)(""),[A,D]=(0,i.useState)(new Date),[E,q]=(0,i.useState)(new Date),[P,L]=(0,i.useState)(""),[M,U]=(0,i.useState)(""),[z,W]=(0,i.useState)(""),[_,B]=(0,i.useState)(!1),[G,H]=(0,i.useState)([]),[K,V]=(0,i.useState)(""),[X,J]=(0,i.useState)([]),[Q,Y]=(0,i.useState)(""),[Z,$]=(0,i.useState)(""),[ee,ae]=(0,i.useState)([]),[re,ie]=(0,i.useState)(""),[se,te]=(0,i.useState)([]),[le,ne]=(0,i.useState)(""),[oe,de]=(0,i.useState)(""),[ce,ue]=(0,i.useState)(""),[me,pe]=(0,i.useState)(""),[he,xe]=(0,i.useState)(""),[ge,fe]=(0,i.useState)(""),je=(0,t.c)(),ve=async()=>{r([]),x(!0);var e=await je.getCois();e.error||(r(e.data),u(e.data)),x(!1)},ye=async e=>{let a=await je.getSubProgramas(e);a.error||ae(a.data)},be=async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=await je.getFases(e);if(!r.error){let e=r.data.map((e=>(e.add=!1,e)));if(a){let r=e.map((e=>(a.findIndex((a=>a.id==e.id))>=0&&(e.add=!0),e)));te(r)}else te(e)}};(0,i.useEffect)((()=>{ve(),(async()=>{let e=await je.getProgramas();e.error||H(e.data)})(),(async()=>{J([]),x(!0);var e=await je.getFuncoes();e.error||J(e.data),x(!1)})()}),[]),(0,i.useEffect)((()=>{u(a)}),[a]);const we={padding:"5px",borderRadius:"10px",border:"2px solid #000"},Ne=e=>{let a=[...j];a=a.filter((a=>{if(a.id!=e)return a})),v(a)},Ce=()=>{O(""),V(""),Y(""),$(""),ie(""),te([]),S(!1),L(""),U(""),W(""),v([])},Se=(e,a)=>{let r=[...se];r[e].add=a,te(r)},Te=e=>{window.confirm("Deseja mesmo excluir esse COI?")&&Fe(e)},Fe=async e=>{let a=await je.deleteCoi(e);a.error?alert(a.error):(ve(),alert(a.msg))},ke=e=>{let[a,r]=e.split("T"),[i,s,t]=a.split("-");return t+"/"+s+"/"+i};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(s.u0,{className:"mb-6",style:{flexDirection:"column",minHeight:600},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:"20px",marginBottom:"20px",marginLeft:10,marginRight:10},children:[(0,d.jsxs)("div",{style:{marginRight:"20px"},children:[(0,d.jsx)("label",{style:{fontWeight:"bold",marginRight:5},children:"Ano:"}),(0,d.jsx)("input",{type:"text",value:oe,onChange:e=>{de(e.target.value)},style:{width:100}})]}),(0,d.jsxs)("div",{style:{marginRight:"20px"},children:[(0,d.jsx)("label",{style:{fontWeight:"bold",marginRight:5},children:"Fun\xe7\xe3o:"}),(0,d.jsxs)("select",{style:we,value:ce,onChange:e=>{ue(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),X.map((e=>(0,d.jsx)("option",{value:e.nome,children:e.nome})))]})]}),(0,d.jsxs)("div",{style:{marginRight:"20px"},children:[(0,d.jsx)("label",{style:{fontWeight:"bold",marginRight:5},children:"Tipo:"}),(0,d.jsxs)("select",{style:we,value:me,onChange:e=>{pe(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),(0,d.jsx)("option",{value:"INICIO",children:"In\xedcio"}),(0,d.jsx)("option",{value:"TERMINO",children:"T\xe9rmino"}),(0,d.jsx)("option",{value:"OUTROS",children:"Outros"})]})]}),(0,d.jsxs)("div",{style:{marginRight:"20px"},children:[(0,d.jsx)("label",{style:{fontWeight:"bold",marginRight:5},children:"Programa:"}),(0,d.jsxs)("select",{style:we,value:he,onChange:e=>{xe(e.target.value),ye(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),G.map((e=>(0,d.jsx)("option",{value:e.id,children:e.sigla})))]})]}),(0,d.jsxs)("div",{style:{marginRight:"20px"},children:[(0,d.jsx)("label",{style:{fontWeight:"bold",marginRight:5},children:"Subprograma:"}),(0,d.jsxs)("select",{style:we,value:ge,onChange:e=>{fe(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),ee.map((e=>(0,d.jsx)("option",{value:e.id,children:e.sigla})))]})]}),(0,d.jsxs)("div",{className:"buttons",children:[(0,d.jsx)("button",{style:{backgroundColor:"green",color:"white",padding:"2px 20px",borderRadius:"5px",border:"none",cursor:"pointer",fontSize:12,width:80,marginBottom:5},onClick:()=>{let e=[...a];""!=ce&&(e=e.filter((e=>{if(e.FuncoesAbordo.nome==ce)return e}))),""!=oe&&(e=e.filter((e=>{if(e.ano==oe)return e}))),""!=me&&(e=e.filter((e=>{if(e.tipo==me)return e}))),""!=he&&(e=e.filter((e=>{if(e.Fases.length>0&&e.Fases[0].Subprograma.Programa.id==he)return e}))),""!=ge&&(e=e.filter((e=>{if(e.Fases.length>0&&e.Fases[0].Subprograma.id==ge)return e}))),u(e)},children:"Filtrar"}),(0,d.jsx)("button",{style:{backgroundColor:"black",color:"white",padding:"2px 20px",borderRadius:"5px",border:"none",cursor:"pointer",marginLeft:5,fontSize:12,width:80},onClick:()=>{u(a)},children:"Limpar"})]})]}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:10},children:(0,d.jsx)("div",{className:"botao-lancar",onClick:()=>N(!0),children:"Criar COI"})}),h&&(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:50},children:(0,d.jsx)(l.c,{width:"200px",black:!0})}),(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:c.map((e=>{var a=[],r=[];return e.Usuarios.forEach(((e,r)=>{a.push(e.Trigrama.trigrama)})),e.Fases.forEach((e=>{r.push(e.descricao)})),(0,d.jsxs)("div",{className:"card-missoes-quadrinhos",children:[(0,d.jsxs)("div",{className:"left-quadrinhos",children:[(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"N\xfamero:"}),(0,d.jsxs)("span",{children:[" ",e.numero]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Ano:"}),(0,d.jsxs)("span",{children:[" ",e.ano]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Tipo:"}),(0,d.jsxs)("span",{children:[" ",e.tipo]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Fun\xe7\xe3o:"}),(0,d.jsxs)("span",{children:[" ",e.FuncoesAbordo.nome]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Programa:"}),(0,d.jsxs)("span",{children:[" ",e.Fases.length>0?e.Fases[0].Subprograma.Programa.sigla:""]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Subprograma:"}),(0,d.jsxs)("span",{children:[" ",e.Fases.length>0?e.Fases[0].Subprograma.sigla:""]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Fases:"}),(0,d.jsxs)("span",{children:[" ",r.join(" / ")]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Data de Cria\xe7\xe3o:"}),(0,d.jsxs)("span",{children:[" ",ke(e.data)]})]}),(0,d.jsxs)("div",{className:"row-card-quadrinhos",children:[(0,d.jsx)("span",{className:"bold",children:"Envolvidos:"}),(0,d.jsxs)("span",{children:[" ",a.join("-")]})]})]}),(0,d.jsxs)("div",{className:"rigth-quadrinhos",style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,d.jsx)("button",{className:"cancelar",style:{backgroundColor:"#000",marginRight:5},onClick:()=>(e=>{let a=e.Usuarios.map((a=>({funcao:e.FuncoesAbordo.nome,id:a.Trigrama.id_user,trigrama:a.Trigrama.trigrama})));v(a),O(e.numero),V(e.ano),U(e.tipo),Y(e.FuncoesAbordo.id);let r=e.Fases[0].Subprograma.Programa.id,i=e.Fases[0].Subprograma.id;$(r),ie(i),ye(r),be(i,e.Fases),S(!0),L(e.id),N(!0)})(e),children:"Editar"}),(0,d.jsx)("button",{className:"cancelar",style:{marginRight:5},onClick:()=>Te(e.id),children:"Excluir"}),(0,d.jsx)("div",{className:"right-botoes-quadrinhos"})]})]})}))}),(0,d.jsxs)("div",{ref:e,className:w?"modal-create-visible":"modal-create",children:[(0,d.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",margin:10,cursor:"pointer"},children:(0,d.jsx)("div",{onClick:()=>{window.confirm("Deseja mesmo sair? Todos os dados adicionados at\xe9 o momento ser\xe3o perdidos")&&(Ce(),N(!1))},style:{color:"#fff"},children:"X"})}),(0,d.jsx)("div",{className:"criar-div",children:(0,d.jsxs)("h3",{style:{color:"#fff"},children:[C?"Editar":"Criar"," COI"]})}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column"},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"N\xfamero: "}),(0,d.jsx)("input",{type:"number",disabled:_,value:R,onChange:e=>O(e.target.value),style:{borderRadius:10,padding:5}})]}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column"},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Ano: "}),(0,d.jsx)("input",{type:"number",disabled:_,value:K,onChange:e=>V(e.target.value),style:{borderRadius:10,padding:5}})]}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column"},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Tipo: "}),(0,d.jsxs)("select",{style:we,value:M,onChange:e=>{U(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),(0,d.jsx)("option",{value:"INICIO",children:"In\xedcio"}),(0,d.jsx)("option",{value:"TERMINO",children:"T\xe9rmino"}),(0,d.jsx)("option",{value:"OUTROS",children:"Outros"})]})]}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column"},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Fun\xe7\xe3o a Bordo: "}),(0,d.jsxs)("select",{style:we,value:Q,onChange:e=>{Y(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),X.map((e=>(0,d.jsx)("option",{value:e.id,children:e.nome})))]})]}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column",marginTop:50},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Programa: "}),(0,d.jsxs)("select",{style:we,value:Z,onChange:e=>{$(e.target.value),ye(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),G.map((e=>(0,d.jsx)("option",{value:e.id,children:e.sigla})))]})]}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column"},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Sub Programa: "}),(0,d.jsxs)("select",{style:we,value:re,onChange:e=>{ie(e.target.value),be(e.target.value)},children:[(0,d.jsx)("option",{value:"",children:"Selecione"}),ee.map((e=>(0,d.jsx)("option",{value:e.id,children:e.sigla})))]})]}),(0,d.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column"},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Fases: "}),se.map(((e,a)=>(0,d.jsxs)("div",{className:"item-fase",children:[(0,d.jsx)("span",{children:e.descricao}),e.add?(0,d.jsx)("img",{src:"https://1gtt.com.br/app/correct.png",style:{cursor:"pointer",marginRight:10},width:"20px",onClick:()=>{Se(a,!1)}}):(0,d.jsx)("div",{className:"select-area",style:{cursor:"pointer"},onClick:()=>{Se(a,!0)}})]})))]}),(0,d.jsxs)("div",{className:"add-trip",style:{marginTop:50},children:[(0,d.jsx)("span",{style:{color:"#fff"},children:"Tripula\xe7\xe3o:"}),(0,d.jsx)(o.c,{maxLength:3,value:T,onChange:F,onKeyPress:async e=>{if(I(!1),"Enter"===e.key){let e=[...j],a=await je.getTrigrama(T);a.error?I(a.error):(e.push({id:a.data.id_user,trigrama:a.data.trigrama,funcao:a.data.Usuario.FuncoesAbordo.nome}),v(e),F(""))}}}),k&&(0,d.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:k}),(0,d.jsx)("div",{className:"tripulante-row",children:(0,d.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Pilotos:"})}),(0,d.jsx)("div",{className:"caixa-tripulante",children:j.map((e=>{if("Piloto"==e.funcao)return(0,d.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,d.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:()=>Ne(e.id),src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,d.jsx)("div",{className:"tripulante-row",children:(0,d.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Mec\xe2nicos:"})}),(0,d.jsx)("div",{className:"caixa-tripulante",children:j.map((e=>{if("Mec\xe2nico de Voo"==e.funcao)return(0,d.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,d.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:()=>Ne(e.id),src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,d.jsx)("div",{className:"tripulante-row",children:(0,d.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Loadmasters:"})}),(0,d.jsx)("div",{className:"caixa-tripulante",children:j.map((e=>{if("Loadmaster"==e.funcao)return(0,d.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,d.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:()=>Ne(e.id),src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,d.jsx)("div",{className:"tripulante-row",children:(0,d.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Comiss\xe1rios:"})}),(0,d.jsx)("div",{className:"caixa-tripulante",children:j.map((e=>{if("Comiss\xe1rio"==e.funcao)return(0,d.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,d.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:()=>Ne(e.id),src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,d.jsx)("div",{className:"tripulante-row",children:(0,d.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Equipe M\xe9dica:"})}),(0,d.jsx)("div",{className:"caixa-tripulante",children:j.map((e=>{if("M\xe9dico"==e.funcao||"Enfermeiro"==e.funcao)return(0,d.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,d.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:()=>Ne(e.id),src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,d.jsx)("div",{className:"tripulante-row",children:(0,d.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"OE-3:"})}),(0,d.jsx)("div",{className:"caixa-tripulante",children:j.map((e=>{if("O3"==e.funcao)return(0,d.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,d.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:()=>Ne(e.id),src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))})]}),(0,d.jsxs)("div",{className:"botoes-add-etapa",style:{marginTop:30},children:[(0,d.jsx)("button",{className:"cancelar",style:{fontSize:"1vw"},onClick:Ce,children:"Limpar"}),g?(0,d.jsx)(l.c,{}):(0,d.jsx)("button",{className:"adicionar",style:{fontSize:"1vw"},onClick:C?async()=>{if(f(!0),!R)return alert("N\xfamero \xe9 obrigat\xf3rio!"),void f(!1);if(!K)return alert("Ano \xe9 obrigat\xf3rio!"),void f(!1);if(j.length<1)return alert("Ao menos um tripulante \xe9 necess\xe1rio!"),void f(!1);if(""==M)return alert("Tipo \xe9 obrigat\xf3rio!"),void f(!1);if(""==Q)return alert("Fun\xe7\xe3o \xe9 obrigat\xf3ria!"),void f(!1);if(""==Z)return alert("Programa \xe9 obrigat\xf3rio!"),void f(!1);if(""==re)return alert("Subprograma \xe9 obrigat\xf3rio!"),void f(!1);let e=se.filter((e=>{if(e.add)return e})),a=e.map((e=>e.id));if(e.length<=0)return alert("Ao menos uma fase \xe9 obrigat\xf3ria!"),void f(!1);let r={numero:R,ano:K,tipo:M,funcao:Q},i=await je.updateCoi(P,r),s=j.map((e=>e.id));if(i.error)return alert(i.error),void f(!1);let t={users:s},l=await je.updateCoiUsuarios(P,t);if(l.error)return alert(l.error),void f(!1);let n={fases:a},o=await je.updateCoiFases(P,n);if(o.error)return alert(o.error),void f(!1);Ce(),N(!1),ve(),f(!1),alert(i.msg)}:async()=>{if(f(!0),!R)return alert("N\xfamero \xe9 obrigat\xf3rio!"),void f(!1);if(!K)return alert("Ano \xe9 obrigat\xf3rio!"),void f(!1);if(j.length<1)return alert("Ao menos um tripulante \xe9 necess\xe1rio!"),void f(!1);if(""==M)return alert("Tipo \xe9 obrigat\xf3rio!"),void f(!1);if(""==Q)return alert("Fun\xe7\xe3o \xe9 obrigat\xf3ria!"),void f(!1);if(""==Z)return alert("Programa \xe9 obrigat\xf3rio!"),void f(!1);if(""==re)return alert("Subprograma \xe9 obrigat\xf3rio!"),void f(!1);let e=se.filter((e=>{if(e.add)return e})),a=e.map((e=>e.id));if(e.length<=0)return alert("Ao menos uma fase \xe9 obrigat\xf3ria!"),void f(!1);let r={numero:R,ano:K,tipo:M,funcao:Q},i=await je.createCoi(r),s=j.map((e=>e.id));if(i.error)return alert(i.error),void f(!1);let t={coiId:i.data.id,userlistId:s},l=await je.createCoiUsuarios(t);if(l.error)return alert(l.error),void f(!1);let n={coiId:i.data.id,faseslistId:a},o=await je.createCoiFases(n);if(o.error)return alert(o.error),void f(!1);Ce(),N(!1),ve(),f(!1),alert(i.msg)},children:C?"Editar COI":"Criar COI"})]}),(0,d.jsxs)("div",{className:"botoes-add-etapa",style:{marginTop:30,justifyContent:"center"},children:[y&&(0,d.jsx)(l.c,{}),C?(0,d.jsx)("button",{className:"cancelar",style:{fontSize:"1.3vw"},onClick:()=>Te(P),children:"Excluir Miss\xe3o"}):(0,d.jsx)(d.Fragment,{})]})]})]})})}}}]);
//# sourceMappingURL=692.000a9c75.chunk.js.map