"use strict";(self.webpackChunkApp_GTT=self.webpackChunkApp_GTT||[]).push([[170],{44788:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s=n(1413),a=n(74165),i=n(15861),r=n(29439),o=n(72791),c=n(78983),l=(n(4751),n(21933)),u=n(59513),d=n.n(u),m=(n(68639),n(80184)),f=function(e){var t=e.maxLength,n=e.value,s=e.onChange,a=e.erro;return(0,m.jsx)("input",{type:"text",value:n,onChange:function(e){var n=e.target.value.toUpperCase().replace(/[^A-Z]/g,"").substring(0,t);s(n)},maxLength:t,style:{border:a?"1px solid #ff0000":"1px solid #000"}})},h=n(72426),p=n.n(h);n(73528);function v(e){var t=e.dep,n=e.pouso,s=e.horaDep,a=e.horaPouso,i=e.index,r=e.edit,o=e.del;return(0,m.jsxs)("div",{className:"view-etapa",children:[(0,m.jsxs)("div",{style:{color:"#000"},children:[i+1,"- ",s," ",t," - ",a," ",n]}),(0,m.jsxs)("div",{className:"botoes-etapa",children:[(0,m.jsx)("img",{src:"https://www.1gtt.com.br/app/pen.png",onClick:r,width:20,height:20}),(0,m.jsx)("img",{src:"https://www.1gtt.com.br/app/close.png",onClick:o,width:20,height:20})]})]})}p().tz.setDefault("Etc/UTC");var x=function(){var e=(0,o.useState)([]),t=(0,r.Z)(e,2),n=t[0],u=t[1],h=(0,o.useState)([]),p=(0,r.Z)(h,2),x=p[0],g=p[1],j=(0,o.useState)(!1),Z=(0,r.Z)(j,2),C=Z[0],y=Z[1],b=(0,o.useState)(!1),w=(0,r.Z)(b,2),N=w[0],k=w[1],D=(0,o.useState)(""),S=(0,r.Z)(D,2),L=(S[0],S[1],(0,o.useState)([])),T=(0,r.Z)(L,2),I=T[0],M=T[1],A=(0,o.useState)(new Date),F=(0,r.Z)(A,2),E=F[0],O=F[1],U=(0,o.useState)(new Date),P=(0,r.Z)(U,2),H=P[0],z=(P[1],(0,o.useState)({avioes:[]})),Y=(0,r.Z)(z,2),G=Y[0],R=Y[1],B=(0,o.useState)(""),_=(0,r.Z)(B,2),J=_[0],X=_[1],q=(0,o.useState)(!1),K=(0,r.Z)(q,2),Q=K[0],V=K[1],W=(0,o.useState)(""),$=(0,r.Z)(W,2),ee=$[0],te=$[1],ne=(0,o.useState)(""),se=(0,r.Z)(ne,2),ae=se[0],ie=se[1],re=(0,o.useState)(""),oe=(0,r.Z)(re,2),ce=oe[0],le=oe[1],ue=(0,o.useState)(new Date),de=(0,r.Z)(ue,2),me=de[0],fe=de[1],he=(0,o.useState)(new Date),pe=(0,r.Z)(he,2),ve=pe[0],xe=pe[1],ge=(0,o.useState)(!1),je=(0,r.Z)(ge,2),Ze=je[0],Ce=je[1],ye=(0,o.useState)(!1),be=(0,r.Z)(ye,2),we=be[0],Ne=be[1],ke=(0,o.useState)({aviao:"",eventos:[]}),De=(0,r.Z)(ke,2),Se=De[0],Le=De[1],Te=(0,o.useState)([]),Ie=(0,r.Z)(Te,2),Me=Ie[0],Ae=Ie[1],Fe=(0,o.useState)([]),Ee=(0,r.Z)(Fe,2),Oe=Ee[0],Ue=Ee[1],Pe=(0,l.Z)(),He=function(){y(!1)},ze=function(e){var t=new Date(e);t.setDate(t.getDate()-3);for(var n=[],s=0;s<=6;s++){if(0!=s)var a=t.setDate(t.getDate()+1);else a=t.setDate(t.getDate());var i=new Date(a),r=i.getDate(),o=i.getMonth()+1;r<=9&&(r="0"+r),o<=9&&(o="0"+o);var c=r+"/"+o+"/"+i.getFullYear();n.push(c)}M(n),Ye(n)},Ye=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,s,i,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],s=t[6],e.next=4,Pe.getMissoesAvioes({inicio:n,fim:s});case 4:(i=e.sent).error||(r=i.data,(o=r.findIndex((function(e){return e.aviao==Se.aviao})))>=0&&Se.eventos.forEach((function(e){r[o].eventos.push(e)})),R({avioes:r}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.getAeronaves();case 2:(t=e.sent).error||Ue(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(e,t){var n=new Date(E);t?n.setDate(n.getDate()-e):n.setDate(n.getDate()+e),O(n)},Be=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n,s,i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==me||""==ve||4!=ee.length||4!=ae.length){e.next=8;break}return Ce(!1),Ne(!1),le(""),e.next=6,Pe.getDistanciaAerodromos({origem:ee,destino:ae});case 6:(t=e.sent).error?(r=t.error,le(t.error),r.includes(ee)&&Ce(!0),r.includes(ae)&&Ne(!0)):(n=t.data.distancia,s=Math.round(60*n/400),s=5*Math.ceil(s/5),(i=new Date(me)).setMinutes(i.getMinutes()+s),xe(i));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(e,t){ie("");var n=new Date(t);n.setMinutes(n.getMinutes()+120),fe(n),te(e),xe(n)},Je=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n,i,o,c,l,u,d,m,f,h,p,v,x,g,j,Z,C,y,b,w,N,k,D,S,L,T;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le(""),""!=ae&&""!=ee&&""!=me&&""!=ve){e.next=4;break}return le("Todos os campos s\xe3o obrigat\xf3rios"),e.abrupt("return");case 4:if(""!=Me){e.next=7;break}return le("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 7:t=me.toISOString(),n=ve.toISOString(),i=t.split("T"),o=(0,r.Z)(i,2),c=o[0],l=o[1],u=n.split("T"),d=(0,r.Z)(u,2),m=d[0],f=d[1],h=c.split("-"),p=(0,r.Z)(h,3),v=p[0],x=p[1],g=p[2],j=m.split("-"),Z=(0,r.Z)(j,3),Z[0],Z[1],Z[2],C=l.split(":"),y=(0,r.Z)(C,3),b=y[0],w=y[1],y[2],N=f.split(":"),k=(0,r.Z)(N,3),D=k[0],S=k[1],k[2],L={data:"".concat(g,"/").concat(x,"/").concat(v),tipo:"missao",missao:{id:null,dep:ee,horaDep:"".concat(b,":").concat(w,"Z"),pouso:ae,horaPouso:"".concat(D,":").concat(S,"Z"),tripulacao:[],omis:""},manutencao:null},(T=(0,s.Z)({},Se)).eventos.push(L),Le(T),_e(ae,ve);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){ze(E)}),[Se]),(0,o.useEffect)((function(){Be()}),[ae,ee,me]),(0,o.useEffect)((function(){ze(E),Ge()}),[E]);var Xe=(0,o.forwardRef)((function(e,t){e.value;var n=e.onClick;return(0,m.jsx)("button",{className:"calendario",onClick:n,ref:t,children:E.toLocaleString("pt-BR",{month:"long"}).toUpperCase()+"/"+E.getFullYear()})})),qe=function(e){e.value;var t=e.onClick;return(0,m.jsx)("button",{className:"calendario",onClick:t,children:"+"})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(c.xH,{className:"mb-6",style:{flexDirection:"column"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:10},children:[(0,m.jsx)("div",{className:"",children:(0,m.jsx)(d(),{selected:E,timeInputLabel:E.toLocaleString("pt-BR",{month:"long"}).toUpperCase()+"/"+E.getFullYear(),onChange:function(e){return O(e)},customInput:(0,m.jsx)(Xe,{})})}),(0,m.jsxs)("div",{className:"botoes",children:[(0,m.jsx)("button",{className:"calendario",onClick:function(){return Re(7,!0)},children:"<<"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Re(1,!0)},children:"<"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){O(H)},children:"HOJE"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Re(1,!1)},children:">"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Re(7,!1)},children:">>"})]}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{onClick:function(){k(!0)},className:"criar",children:"Criar Miss\xe3o"})})]}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[(0,m.jsxs)("div",{className:"topo",children:[(0,m.jsx)("div",{className:"missao",children:"Avi\xe3o"}),I.map((function(e,t){var n=H.getDate(),s=H.getMonth()+1;n<=9&&(n="0"+n),s<=9&&(s="0"+s);var a=n+"/"+s+"/"+H.getFullYear();return(0,m.jsx)("div",{className:"missao",style:{backgroundColor:a==e?"#46a31d":"#000"},children:e})}))]}),(0,m.jsx)("div",{className:"missoes",children:G.avioes.length>0&&G.avioes.map((function(e){return(0,m.jsxs)("div",{className:"missao-item",children:[(0,m.jsx)("div",{className:"missao aviao",children:e.aviao}),I.map((function(t){return(0,m.jsx)("div",{className:"item-missao",children:e.eventos.length>0&&e.eventos.map((function(e){if(e.data==t)return(0,m.jsxs)("div",{onClick:function(){return k(!0)},className:"missao-white white",onMouseEnter:function(){return function(e,t){g(e),u(t.tripulacao.join("/")),X(t),y(!0)}(e.missao.id,e.missao)},onMouseLeave:He,children:[C&&x==e.missao.id&&null!=e.missao.id&&(0,m.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",background:"#000",color:"#fff",padding:"10px",border:"1px solid black",zIndex:1},children:[(0,m.jsxs)("p",{children:["OMIS: ",J.omis]}),(0,m.jsxs)("p",{children:["Tripula\xe7\xe3o: ",n]})]}),e.missao.horaDep," ",e.missao.dep," - ",e.missao.pouso," ",e.missao.horaPouso]})}))})}))]})}))})]}),N&&(0,m.jsxs)("div",{className:"modal-create",children:[(0,m.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",margin:10,cursor:"pointer"},children:(0,m.jsx)("div",{onClick:function(){return k(!1)},style:{color:"#fff"},children:"X"})}),(0,m.jsx)("div",{className:"criar-div",children:(0,m.jsx)("h3",{style:{color:"#fff"},children:"Criar Miss\xe3o"})}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("h5",{style:{color:"#fff"},children:"Avi\xe3o:"}),Oe.map((function(e){return(0,m.jsx)("button",{onClick:function(){Ae(e.aeronave);var t=(0,s.Z)({},Se);t.aviao=e.aeronave,Le(t)},style:{backgroundColor:Me==e.aeronave?"#28a745":"#FFF",color:Me==e.aeronave?"#fff":"#000"},className:"calendario",children:e.aeronave})}))]}),(0,m.jsxs)("div",{className:"add-etapa",children:[(0,m.jsx)("h5",{style:{color:"#fff"},children:"Etapas:"}),(0,m.jsx)("img",{onClick:function(){return V(!0)},style:{cursor:"pointer"},src:"https://www.1gtt.com.br/app/add-white.png",width:20,height:20})]}),Q&&(0,m.jsxs)("div",{className:"form-area",children:[(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"DEP: "}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[me.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"UTC"})+"Z",(0,m.jsx)("div",{className:"",style:{marginLeft:10},children:(0,m.jsx)(d(),{selected:me,timeInputLabel:me,onChange:function(e){var t=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-t),fe(e)},customInput:(0,m.jsx)(qe,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"LLL",timeZone:"Etc/UTC",timeZoneData:[{value:"Etc/UTC",label:"Zulu (GMT 0)"}]})})]})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Origem: "}),(0,m.jsx)(f,{erro:Ze,maxLength:4,value:ee,onChange:te})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Destino: "}),(0,m.jsx)(f,{erro:we,maxLength:4,value:ae,onChange:ie})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"Pouso: "}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[ve.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"UTC"})+"Z",(0,m.jsx)("div",{className:"",style:{marginLeft:10},children:(0,m.jsx)(d(),{selected:ve,timeInputLabel:ve,onChange:function(e){var t=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-t),xe(e)},customInput:(0,m.jsx)(qe,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"LLL"})})]})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",children:[(0,m.jsx)("button",{onClick:function(){te(""),ie(""),fe(""),xe(""),V(!1)},className:"cancelar",children:"Cancelar"}),(0,m.jsx)("button",{className:"adicionar",onClick:Je,children:"Adicionar"})]}),""!=ce&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:ce})]}),Se.eventos.map((function(e,t){return(0,m.jsx)(v,{edit:function(){},del:function(){var e=(0,s.Z)({},Se),n=e.eventos.filter((function(e,n){if(n!=t)return e}));e.eventos=n,Le(e)},index:t,dep:e.missao.dep,pouso:e.missao.pouso,horaDep:e.missao.horaDep,horaPouso:e.missao.horaPouso})}))]})]})})}}}]);
//# sourceMappingURL=170.7e7fc7cd.chunk.js.map