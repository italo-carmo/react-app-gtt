"use strict";(self.webpackChunkApp_GTT=self.webpackChunkApp_GTT||[]).push([[19],{28050:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(93433),s=n(74165),r=n(15861),o=n(1413),i=n(29439),c=n(72791),u=n(78983),l=n(21933),d=n(59513),p=n.n(d),m=(n(68639),n(80184)),f=function(e){var t=e.maxLength,n=e.value,a=e.onChange,s=e.erro,r=e.onKeyPress,o=e.id,i=void 0===o?"":o;return(0,m.jsx)("input",{type:"text",id:i,value:n,onChange:function(e){var n=e.target.value.toUpperCase().replace(/[^A-Z]/g,"").substring(0,t);a(n)},maxLength:t,style:{border:s?"1px solid #ff0000":"1px solid #000"},onKeyPress:r})},v=function(e){var t=e.maxLength,n=e.value,a=e.onChange,s=e.erro,r=e.onKeyPress;return(0,m.jsx)("input",{type:"text",value:n,onChange:function(e){var n=e.target.value.toUpperCase().replace(/[^A-Z]/g,"").substring(0,t);a(n)},maxLength:t,style:{border:s?"1px solid #ff0000":"1px solid #000"},onKeyPress:r})},h=function(e){var t=e.value,n=e.onChange,a=e.disabled;return(0,m.jsx)("input",{type:"number",value:t,onChange:function(e){var t=e.target.value.toUpperCase().replace(/[^0-9]/g,"").substring(0,5);n(t)},maxLength:5,disabled:a,style:{border:"1px solid #000",backgroundColor:"#fff"}})},x=function(e){var t=e.value,n=e.onChange;return(0,m.jsx)("input",{type:"number",value:t,onChange:function(e){var t=e.target.value.toUpperCase().replace(/[^0-9]/g,"").substring(0,5);n(t)},maxLength:5,style:{border:"1px solid #000"}})},g=n(72426),j=n.n(g);n(73528);function Z(e){var t=e.dep,n=e.pouso,a=e.alternativa,s=e.horaDep,r=e.horaPouso,o=e.index,i=e.edit,c=e.del,u=!1;return t&&n&&a&&s&&r&&""!=t&&""!=n&&""!=a&&""!=s&&""!=r&&(u=!0),(0,m.jsxs)("div",{className:u?"view-etapa complete":"view-etapa",children:[(0,m.jsxs)("div",{className:u?"complete-text":"",style:{color:"#000"},children:[o+1,"- ",s," ",t," - ",r," ",n]}),(0,m.jsxs)("div",{className:"botoes-etapa",children:[(0,m.jsx)("img",{src:u?"https://www.1gtt.com.br/app/pen-white.png":"https://www.1gtt.com.br/app/pen.png",onClick:i,width:20,height:20}),(0,m.jsx)("img",{src:u?"https://www.1gtt.com.br/app/close-white.png":"https://www.1gtt.com.br/app/close.png",onClick:c,width:20,height:20})]})]})}var b=n(5016);j().tz.setDefault("Etc/UTC");var w=function(){var e=(0,c.useState)([]),t=(0,i.Z)(e,2),n=t[0],d=t[1],g=(0,c.useState)([]),j=(0,i.Z)(g,2),w=j[0],y=j[1],S=(0,c.useState)([]),C=(0,i.Z)(S,2),k=C[0],N=C[1],I=(0,c.useState)(!1),O=(0,i.Z)(I,2),M=O[0],D=O[1],T=(0,c.useState)(!1),E=(0,i.Z)(T,2),L=E[0],A=E[1],_=(0,c.useState)(!1),P=(0,i.Z)(_,2),F=P[0],z=P[1],H=(0,c.useState)(!1),U=(0,i.Z)(H,2),R=U[0],K=U[1],G=(0,c.useState)(!1),Y=(0,i.Z)(G,2),B=Y[0],V=Y[1],J=(0,c.useState)([]),X=(0,i.Z)(J,2),q=X[0],Q=X[1],W=(0,c.useState)(new Date),$=(0,i.Z)(W,2),ee=$[0],te=$[1],ne=(0,c.useState)(new Date),ae=(0,i.Z)(ne,2),se=ae[0],re=(ae[1],(0,c.useState)({avioes:[]})),oe=(0,i.Z)(re,2),ie=oe[0],ce=oe[1],ue=(0,c.useState)(""),le=(0,i.Z)(ue,2),de=le[0],pe=le[1],me=(0,c.useState)(!1),fe=(0,i.Z)(me,2),ve=fe[0],he=fe[1],xe=(0,c.useState)(""),ge=(0,i.Z)(xe,2),je=ge[0],Ze=ge[1],be=(0,c.useState)(""),we=(0,i.Z)(be,2),ye=we[0],Se=we[1],Ce=(0,c.useState)(""),ke=(0,i.Z)(Ce,2),Ne=ke[0],Ie=ke[1],Oe=(0,c.useState)(""),Me=(0,i.Z)(Oe,2),De=Me[0],Te=Me[1],Ee=(0,c.useState)(new Date),Le=(0,i.Z)(Ee,2),Ae=Le[0],_e=Le[1],Pe=(0,c.useState)(new Date),Fe=(0,i.Z)(Pe,2),ze=Fe[0],He=Fe[1],Ue=(0,c.useState)(!1),Re=(0,i.Z)(Ue,2),Ke=Re[0],Ge=Re[1],Ye=(0,c.useState)(!1),Be=(0,i.Z)(Ye,2),Ve=Be[0],Je=Be[1],Xe=(0,c.useState)(!1),qe=(0,i.Z)(Xe,2),Qe=qe[0],We=qe[1],$e=(0,c.useState)(""),et=(0,i.Z)($e,2),tt=et[0],nt=et[1],at=(0,c.useState)(!1),st=(0,i.Z)(at,2),rt=st[0],ot=st[1],it=(0,c.useState)(!1),ct=(0,i.Z)(it,2),ut=ct[0],lt=ct[1],dt=(0,c.useState)({aviao:"",eventos:[]}),pt=(0,i.Z)(dt,2),mt=pt[0],ft=pt[1],vt=(0,c.useState)([]),ht=(0,i.Z)(vt,2),xt=ht[0],gt=ht[1],jt=(0,c.useState)(""),Zt=(0,i.Z)(jt,2),bt=Zt[0],wt=Zt[1],yt=(0,c.useState)([]),St=(0,i.Z)(yt,2),Ct=St[0],kt=St[1],Nt=(0,c.useState)(!1),It=(0,i.Z)(Nt,2),Ot=It[0],Mt=It[1],Dt=(0,c.useState)(!1),Tt=(0,i.Z)(Dt,2),Et=Tt[0],Lt=Tt[1],At=(0,c.useState)(!1),_t=(0,i.Z)(At,2),Pt=_t[0],Ft=_t[1],zt=(0,c.useState)(""),Ht=(0,i.Z)(zt,2),Ut=Ht[0],Rt=Ht[1],Kt=(0,c.useState)(""),Gt=(0,i.Z)(Kt,2),Yt=Gt[0],Bt=Gt[1],Vt=(0,c.useState)(""),Jt=(0,i.Z)(Vt,2),Xt=Jt[0],qt=Jt[1],Qt=(0,c.useState)(""),Wt=(0,i.Z)(Qt,2),$t=Wt[0],en=Wt[1],tn=(0,c.useState)(""),nn=(0,i.Z)(tn,2),an=nn[0],sn=nn[1],rn=(0,c.useState)([]),on=(0,i.Z)(rn,2),cn=on[0],un=on[1],ln=(0,c.useState)(0),dn=(0,i.Z)(ln,2),pn=dn[0],mn=dn[1],fn=(0,c.useState)(!0),vn=(0,i.Z)(fn,2),hn=vn[0],xn=vn[1],gn=(0,c.useRef)(null),jn=(0,c.useRef)(null),Zn=(0,c.useRef)(null),bn=(0,l.Z)(),wn=function(){D(!1)},yn=function(e){"Enter"===e.key&&(R?Un():Sn())},Sn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn();case 2:e.sent&&setTimeout((function(){var e=document.getElementById("icao-pouso");e&&e.focus()}),0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Cn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lt(!1),"Enter"!==t.key){e.next=8;break}return r=(0,a.Z)(n),e.next=5,bn.getTrigrama(Yt);case 5:o=e.sent,console.log(o),o.error?lt(o.error):(r.push({id:o.data.id_user,trigrama:o.data.trigrama,funcao:o.data.Usuario.FuncoesAbordo.nome}),d(r),Bt(""));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(e);n.setDate(n.getDate()-1);for(var a=[],s=0;s<=6;s++){if(0!=s)var r=n.setDate(n.getDate()+1);else r=n.setDate(n.getDate());var o=new Date(r),i=o.getDate(),c=o.getMonth()+1;i<=9&&(i="0"+i),c<=9&&(c="0"+c);var u=i+"/"+c+"/"+o.getFullYear();a.push(u)}Q(a),On(a,t)},Nn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn.getOfrags();case 2:(t=e.sent).error||un(t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),In=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(""),nt(""),""!=xt){e.next=5;break}return nt("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 5:if(!F){e.next=8;break}return nt("Exclua essa OMIS e crie outra para cumprir com OFRAG"),e.abrupt("return");case 8:if(""==an){e.next=13;break}return e.next=11,bn.getOfrag(an);case 11:(t=e.sent).error||(n=[],a=(0,o.Z)({},ie),t.data.missoes[0].rotaOfrag.etapas.forEach((function(e){var t=e.dataHoraDecolagem.split("T"),s=(0,i.Z)(t,2),r=s[0],o=s[1],c=r.split("-"),u=(0,i.Z)(c,3),l=u[0],d=u[1],p=u[2],m=o.split(":"),f=(0,i.Z)(m,3),v=f[0],h=f[1];f[2];if(e.dataHoraPouso){var x=e.dataHoraPouso.split("T"),g=(0,i.Z)(x,2),j=g[0],Z=g[1],b=j.split("-"),w=(0,i.Z)(b,3),y=(w[0],w[1],w[2],Z.split(":")),S=(0,i.Z)(y,3),C=S[0],k=S[1];S[2]}var N={data:"".concat(p,"/").concat(d,"/").concat(l),tipo:"missao",missao:{id:Math.floor(1e4*Math.random())+1,dep:e.codigoIcaoOrigem,horaDep:"".concat(v,":").concat(h,"Z"),pouso:e.codigoIcaoDestino,horaPouso:e.dataHoraPouso?"".concat(C,":").concat(k,"Z"):"",depISO:e.dataHoraDecolagem,pousoISO:e.dataHoraPouso,tripulacao:[],omis:"",edicao:!0},manutencao:null},I=a.avioes.findIndex((function(e){return e.aviao==xt}));I>=0&&a.avioes[I].eventos.push(N),n.push(N)})),n.length>0&&((r=(0,o.Z)({},mt)).eventos=n,ft(r),Te(""),Ft(!1),ot(!0),ce(a)));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),On=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n,a,r,o,i,c,u=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],a=t[0],r=t[6],e.next=5,bn.getMissoesAvioes({inicio:a,fim:r});case 5:(o=e.sent).error||(i=o.data,n||mt.eventos.length>0&&(c=i.findIndex((function(e){return e.aviao==xt})))>=0&&mt.eventos.forEach((function(e){i[c].eventos.push(e)})),ce({avioes:i}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn.getAeronaves();case 2:(t=e.sent).error||kt(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dn=function(e,t){var n=new Date(ee);t?n.setDate(n.getDate()-e):n.setDate(n.getDate()+e),te(n)},Tn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mt(!1),Lt(!1),z(!1),A(!0),e.next=6,bn.getUltimaMissao();case 6:(t=e.sent).error||qt((parseInt(t.data[0].numero)+1).toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),En=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,a,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==Ae||""==ze||4!=je.length||4!=ye.length){e.next=9;break}return Ge(!1),Je(!1),We(!1),Te(""),e.next=7,bn.getDistanciaAerodromos({origem:je,destino:ye});case 7:(t=e.sent).error?(o=t.error,Te(t.error),o.includes(je)&&Ge(!0),o.includes(ye)&&Je(!0)):(n=t.data.distancia,a=Math.round(60*n/400),a=5*Math.ceil(a/5),(r=new Date(Ae)).setMinutes(r.getMinutes()+a),He(r));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ln=function(e,t){Se(""),Ie(""),mn(0);var n=new Date(t);n.setMinutes(n.getMinutes()+120);var a=n.getTimezoneOffset();n.setMinutes(n.getMinutes()+a),_e(n),Ze(e),He(n),jn.current&&gn.current.focus()},An=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,o,i,c,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lt(!0),""!=xt&&0!=mt.eventos.length){e.next=5;break}return alert("Todos os campos s\xe3o obrigat\xf3rios!"),Lt(!1),e.abrupt("return");case 5:if(t=!1,mt.eventos.forEach((function(e){e.missao.pousoISO&&e.missao.depISO&&e.missao.alternativa&&""!=e.missao.alternativa||(t=!0)})),!t){e.next=11;break}return Lt(!1),alert("Hor\xe1rios de DEP e POUSO e ICAO de ALTERNATIVA s\xe3o obrigat\xf3rios!"),e.abrupt("return");case 11:if(F){e.next=30;break}return a={},""!=Xt&&(a.numero=Xt),e.next=16,bn.createMissao(a);case 16:if((o=e.sent).error){e.next=28;break}return i=o.data.id,mt.eventos.forEach(function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t,n){var a,r,c,u,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn.getAerodromo(t.missao.dep);case 2:return a=e.sent,e.next=5,bn.getAerodromo(t.missao.pouso);case 5:if(r=e.sent,c=0,u=null,!t.missao.alternativa){e.next=17;break}return e.next=11,bn.getAerodromo(t.missao.alternativa);case 11:return l=e.sent,u=l.data.id,e.next=15,bn.getCombMinimo(t.missao.dep,t.missao.pouso,t.missao.alternativa);case 15:e.sent.error||(c=o.data.combustivel);case 17:return d={dep:t.missao.depISO,pouso:t.missao.pousoISO,id_missao:i,id_aeronave:bt,id_dep:a.data.id,id_pouso:r.data.id,id_alternativa:u,combustivel_minimo:""!=t.missao.combustivel_minimo?t.missao.combustivel_minimo:c},e.next=20,bn.createEtapa(d);case 20:if(!e.sent.error){e.next=26;break}return alert(o.etapa.error),e.abrupt("return");case 26:n==mt.eventos.length-1&&(A(!1),Lt(!1),setTimeout((function(){window.location.reload()}),"2000"));case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),c=[],n.forEach((function(e){c.push(e.id)})),u={id_missao:i,id_militares:c},e.next=25,bn.createEscala(u);case 25:Lt(!1),e.next=30;break;case 28:Lt(!1),alert(o.error);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_n=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t,n,a){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,n,a),""==t||""==n||""==a||4!=t.length||4!=n.length||4!=a.length){e.next=6;break}return e.next=4,bn.getCombMinimo({dep:t,pouso:n,alternativa:a});case 4:(r=e.sent).error||mn(r.data.combustivel);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Pn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,o,i,c,u,l,d,p,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lt(!0),t=Ut,""==Xt){e.next=6;break}return a={numero:Xt},e.next=6,bn.updateMissao(a,t);case 6:return o=mt.eventos.map(function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n,a,r,o,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,bn.getAerodromo(t.missao.dep);case 3:return a=e.sent,e.next=6,bn.getAerodromo(t.missao.pouso);case 6:if(r=e.sent,o=null,!t.missao.alternativa){e.next=13;break}return e.next=11,bn.getAerodromo(t.missao.alternativa);case 11:i=e.sent,o=i.data.id;case 13:return n.dep=t.missao.depISO,n.pouso=t.missao.pousoISO,n.id_aeronave=bt,n.id_dep=a.data.id,n.id_pouso=r.data.id,n.id_alternativa=o,n.combustivel_minimo=t.missao.combustivel_minimo,t.missao.edicao?n.id=null:n.id=t.missao.id,e.abrupt("return",n);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(o);case 9:return i=e.sent,c={etapas:i,id_missao:t},e.next=13,bn.updateEtapas(c);case 13:if(!(u=e.sent).error){e.next=20;break}return Lt(!1),alert(u.error),e.abrupt("return");case 20:return l=[],n.forEach((function(e){l.push(e.id)})),d={id_missao:t,id_militares:l},e.next=25,bn.updateEscala(d);case 25:if(p={},""!=Xt&&(m=(new Date).getFullYear().toString().substring(2,4),p.numero=1e3*parseInt(m)+parseInt(Xt)),""!=$t&&(p.comentarios=$t),!p.omis&&!p.comentarios){e.next=31;break}return e.next=31,bn.updateMissao(p,t);case 31:Hn(),A(!1),kn(ee,!0);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mt(!0),!window.confirm("Deseja mesmo excluir essa miss\xe3o?")){e.next=16;break}return t=mt.eventos[0].missao.id_missao,e.next=6,bn.deleteMissao(t);case 6:if(!(n=e.sent).error){e.next=11;break}return Mt(!1),alert(n.error),e.abrupt("return");case 11:Mt(!1),ce({avioes:[]}),Hn(),A(!1),kn(ee,!0);case 16:Mt(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zn=function(e){var t=(0,a.Z)(n);t=t.filter((function(t){if(t.id!=e)return t})),d(t)},Hn=function(){ft({aviao:"",eventos:[]});var e=(0,o.Z)({},ie);ce(e),Se(""),Ze(""),Ie(""),_e(new Date),He(new Date),gt(""),en(""),qt(""),sn(""),z(!1),K(!1),d([]),mn(0),kn(ee,!0)},Un=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,a,r,c,u,l,d,p,m,f,v,h,x,g,j,Z,b,w,y,S,C,k,N,I,O,M,D,T,E,L,A,_;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(""),""!=ye&&""!=je&&""!=Ne&&""!=Ae&&""!=ze){e.next=4;break}return Te("Todos os campos s\xe3o obrigat\xf3rios"),e.abrupt("return");case 4:if(""!=xt){e.next=7;break}return Te("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 7:return e.next=9,bn.getAerodromo(Ne);case 9:if(!(t=e.sent).error){e.next=14;break}return Te(t.error),We(!0),e.abrupt("return");case 14:We(!1),n=Ae.getTimezoneOffset(),Ae.setMinutes(Ae.getMinutes()-n),a=ze.getTimezoneOffset(),ze.setMinutes(ze.getMinutes()-a),r=Ae.toISOString(),c=ze.toISOString(),u=r.split("T"),l=(0,i.Z)(u,2),d=l[0],p=l[1],m=c.split("T"),f=(0,i.Z)(m,2),f[0],v=f[1],h=d.split("-"),x=(0,i.Z)(h,3),g=x[0],j=x[1],Z=x[2],b=p.split(":"),w=(0,i.Z)(b,3),y=w[0],S=w[1],w[2],C=v.split(":"),k=(0,i.Z)(C,3),N=k[0],I=k[1],k[2],O=(0,o.Z)({},mt),M=(0,o.Z)({},ie),D=O.eventos[B],T={data:"".concat(Z,"/").concat(j,"/").concat(g),tipo:"missao",missao:{id:D.missao.id,dep:je,horaDep:"".concat(y,":").concat(S,"Z"),pouso:ye,horaPouso:"".concat(N,":").concat(I,"Z"),alternativa:Ne,depISO:Ae,pousoISO:ze,tripulacao:[],omis:"",combustivel_minimo:pn,edicao:D.missao.edicao},manutencao:null},O.eventos[B]=T,ft(O),(E=M.avioes.findIndex((function(e){return e.aviao==xt})))>=0&&(L=M.avioes[E].eventos.findIndex((function(e){return e.missao.id==D.missao.id})))>=0&&(M.avioes[E].eventos[L]=T,ce(M)),A=O.eventos[O.eventos.length-1].missao.pouso,_=O.eventos[O.eventos.length-1].missao.pousoISO,K(!1),V(""),Ln(A,_);case 39:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rn=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,a,r,c,u,l,d,p,m,f,v,h,x,g,j,Z,b,w,y,S,C,k,N,I,O,M,D,T;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(""),""!=ye&&""!=je&&""!=Ne&&""!=Ae&&""!=ze){e.next=4;break}return Te("Todos os campos s\xe3o obrigat\xf3rios"),e.abrupt("return");case 4:if(""!=xt){e.next=7;break}return Te("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 7:return e.next=9,bn.getAerodromo(Ne);case 9:if(!(t=e.sent).error){e.next=14;break}return Te(t.error),We(!0),e.abrupt("return",null);case 14:return We(!1),Je(!1),n=Ae.getTimezoneOffset(),Ae.setMinutes(Ae.getMinutes()-n),a=ze.getTimezoneOffset(),ze.setMinutes(ze.getMinutes()-a),r=Ae.toISOString(),c=ze.toISOString(),u=r.split("T"),l=(0,i.Z)(u,2),d=l[0],p=l[1],m=c.split("T"),f=(0,i.Z)(m,2),f[0],v=f[1],h=d.split("-"),x=(0,i.Z)(h,3),g=x[0],j=x[1],Z=x[2],b=p.split(":"),w=(0,i.Z)(b,3),y=w[0],S=w[1],w[2],C=v.split(":"),k=(0,i.Z)(C,3),N=k[0],I=k[1],k[2],O={data:"".concat(Z,"/").concat(j,"/").concat(g),tipo:"missao",missao:{id:Math.floor(1e4*Math.random())+1,dep:je,horaDep:"".concat(y,":").concat(S,"Z"),pouso:ye,horaPouso:"".concat(N,":").concat(I,"Z"),alternativa:Ne,depISO:Ae,pousoISO:ze,tripulacao:[],omis:"",combustivel_minimo:pn,edicao:!0},manutencao:null},(M=(0,o.Z)({},mt)).eventos.push(O),D=(0,o.Z)({},ie),(T=D.avioes.findIndex((function(e){return e.aviao==xt})))>=0&&D.avioes[T].eventos.push(O),ce(D),ft(M),Ln(ye,ze),e.abrupt("return",!0);case 37:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){!function(){if(mt.eventos.length>0){var e=(0,o.Z)({},ie);e.avioes.forEach((function(t,n){if(t.eventos.length>0){var a=t.eventos.filter((function(e){if(mt.eventos.findIndex((function(t){return t.missao.id==e.missao.id}))<0)return e}));e.avioes[n].eventos=a}}));var t=e.avioes.findIndex((function(e){return e.aviao==xt}));t>=0&&mt.eventos.forEach((function(n){e.avioes[t].eventos.push(n)})),ce(e)}}()}),[xt]),(0,c.useEffect)((function(){En()}),[ye,je,Ae]),(0,c.useEffect)((function(){_n(je,ye,Ne)}),[ye,je,Ne]),(0,c.useEffect)((function(){Mn(),Nn()}),[]),(0,c.useEffect)((function(){kn(ee)}),[ee]);var Kn=(0,c.forwardRef)((function(e,t){e.value;var n=e.onClick;return(0,m.jsx)("button",{className:"calendario",onClick:n,ref:t,children:ee.toLocaleString("pt-BR",{month:"long"}).toUpperCase()+"/"+ee.getFullYear()})})),Gn=function(e){e.value;var t=e.onClick;return(0,m.jsx)("button",{className:"calendario",onClick:t,children:"+"})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(u.xH,{className:"mb-6",style:{flexDirection:"column"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:10},children:[(0,m.jsx)("div",{className:"",children:(0,m.jsx)(p(),{selected:ee,timeInputLabel:ee.toLocaleString("pt-BR",{month:"long"}).toUpperCase()+"/"+ee.getFullYear(),onChange:function(e){return te(e)},customInput:(0,m.jsx)(Kn,{})})}),(0,m.jsxs)("div",{className:"botoes",children:[(0,m.jsx)("button",{className:"calendario",onClick:function(){return Dn(7,!0)},children:"<<"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Dn(1,!0)},children:"<"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){te(se)},children:"HOJE"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Dn(1,!1)},children:">"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Dn(7,!1)},children:">>"})]}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{onClick:Tn,className:"criar",children:"Criar Miss\xe3o"})})]}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[(0,m.jsxs)("div",{className:"topo",children:[(0,m.jsx)("div",{className:"missao",children:"Avi\xe3o"}),q.map((function(e,t){var n=se.getDate(),a=se.getMonth()+1;n<=9&&(n="0"+n),a<=9&&(a="0"+a);var s=n+"/"+a+"/"+se.getFullYear();return(0,m.jsx)("div",{className:"missao",style:{backgroundColor:s==e?"#46a31d":"#000"},children:e})}))]}),(0,m.jsx)("div",{className:"missoes",children:ie.avioes.length>0&&ie.avioes.map((function(e){return(0,m.jsxs)("div",{className:"missao-item",children:[(0,m.jsx)("div",{className:"missao aviao",children:e.aviao}),q.map((function(t){return(0,m.jsx)("div",{className:"item-missao",children:e.eventos.length>0&&e.eventos.map((function(n){if(n.data==t)return(0,m.jsxs)("div",{onClick:function(){return function(e){Mt(!1),Lt(!1),z(!0),K(!1);var t=e.eventos[0].missao.id_missao;Rt(t);var n=(0,o.Z)({},mt),a=[];e.eventos[0].missao.tripulacao.forEach((function(e){a.push(e)}));var s=e.eventos[0].comentarios;en(s);var r=e.eventos[0].missao.omis;qt(r),d(a),n.eventos=e.eventos,ft(n),A(!0),gt(e.aviao);var i=Ct.findIndex((function(t){return t.aeronave==e.aviao}));i>=0&&wt(Ct[i].id)}(e)},className:"missao-white white",onMouseEnter:function(){return function(e,t){N(e);var n=t.tripulacao.map((function(e){return e.trigrama}));y(n.join("/")),pe(t),D(!0)}(n.missao.id,n.missao)},onMouseLeave:wn,children:[M&&k==n.missao.id&&null!=n.missao.id&&(0,m.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",background:"#000",color:"#fff",padding:"10px",border:"1px solid black",zIndex:1},children:[(0,m.jsxs)("p",{style:{fontSize:"1vw"},children:["OMIS: ",de.omis]}),(0,m.jsxs)("p",{style:{fontSize:"1vw"},children:["Tripula\xe7\xe3o: ",w]})]}),(0,m.jsxs)("div",{className:"text-missao",children:[n.missao.horaDep," ",n.missao.dep]}),(0,m.jsxs)("div",{className:"text-missao",children:[n.missao.horaPouso," ",n.missao.pouso," "]})]})}))})}))]})}))})]}),(0,m.jsxs)("div",{ref:Zn,className:L?"modal-create-visible":"modal-create",children:[(0,m.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",margin:10,cursor:"pointer"},children:(0,m.jsx)("div",{onClick:function(){window.confirm("Deseja mesmo sair? Todos os dados adicionados at\xe9 o momento ser\xe3o perdidos")&&(Hn(),A(!1))},style:{color:"#fff"},children:"X"})}),(0,m.jsx)("div",{className:"criar-div",children:(0,m.jsxs)("h3",{style:{color:"#fff"},children:[F?"Editar":"Criar"," Miss\xe3o"]})}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Avi\xe3o:"}),Ct.map((function(e){return(0,m.jsx)("button",{onClick:function(){gt(e.aeronave),wt(e.id);var t=(0,o.Z)({},mt);t.aviao=e.aeronave,ft(t)},style:{backgroundColor:xt==e.aeronave?"#28a745":"#FFF",color:xt==e.aeronave?"#fff":"#000"},className:"botao-aviao",children:e.aeronave})}))]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"OMIS:"}),(0,m.jsxs)("div",{style:{color:"#fff"},children:[(0,m.jsx)(h,{value:Xt,onChange:qt,disabled:hn}),hn&&(0,m.jsx)("button",{onClick:function(){return xn(!1)},className:"cumprir",children:"Editar"}),!hn&&(0,m.jsx)("button",{onClick:function(){return xn(!0)},className:"cumprir",children:"Salvar N\xfamero"})]})]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"OFRAG:"}),(0,m.jsxs)("div",{style:{color:"#fff"},children:[(0,m.jsxs)("select",{id:"select-box",style:{borderRadius:5},value:an,onChange:function(e){sn(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"Selecione uma op\xe7\xe3o"}),cn.length>0?cn.map((function(e,t){return(0,m.jsx)("option",{style:{backgroundColor:"#fff"},value:e.id,children:e.numero},t)})):null]}),""==an||F||rt?null:Pt?(0,m.jsx)(b.Z,{}):(0,m.jsx)("button",{onClick:In,className:"cumprir",children:"Cumprir"}),""!=tt&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:tt})]})]}),(0,m.jsxs)("div",{className:"add-etapa",children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Etapas:"}),(0,m.jsx)("img",{onClick:function(){if(!R&&ve&&he(!1),!R&&!ve&&(he(!0),mt.eventos.length>0)){var e=mt.eventos[mt.eventos.length-1].missao.pouso,t=mt.eventos[mt.eventos.length-1].missao.pousoISO;Ln(e,t)}R&&K(!1)},style:{cursor:"pointer"},src:"https://www.1gtt.com.br/app/add-white.png",width:20,height:20})]}),(ve||R)&&(0,m.jsxs)("div",{className:"form-area",children:[(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"DEP: "}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Ae.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"})+"Z",(0,m.jsx)("div",{className:"",style:{marginLeft:10},children:(0,m.jsx)(p(),{selected:Ae,timeInputLabel:Ae,onChange:function(e){_e(e)},customInput:(0,m.jsx)(Gn,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"LLL",timeZone:"Etc/UTC",timeZoneData:[{value:"Etc/UTC",label:"Zulu (GMT 0)"}]})})]})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Origem: "}),(0,m.jsx)(f,{erro:Ke,maxLength:4,value:je,onChange:Ze})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Destino: "}),(0,m.jsx)(f,{ref:gn,id:"icao-pouso",onKeyPress:yn,erro:Ve,maxLength:4,value:ye,onChange:Se})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Alternativa: "}),(0,m.jsx)(f,{ref:jn,onKeyPress:yn,erro:Qe,maxLength:4,value:Ne,onChange:Ie})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"Pouso: "}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[ze.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"})+"Z",(0,m.jsx)("div",{className:"",style:{marginLeft:10},children:(0,m.jsx)(p(),{selected:ze,timeInputLabel:ze,onChange:function(e){He(e)},customInput:(0,m.jsx)(Gn,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"LLL"})})]})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"COMB M\xednimo: "}),(0,m.jsx)(x,{onKeyPress:yn,value:pn,onChange:mn})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",children:[(0,m.jsx)("button",{onClick:function(){Ze(""),Se(""),_e(""),He(""),he(!1),K(!1)},className:"cancelar",children:"Cancelar"}),(0,m.jsx)("button",{className:"adicionar",onClick:R?Un:Rn,children:R?"Editar":"Adicionar"})]}),""!=De&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:De})]}),mt.eventos.map((function(e,t){return(0,m.jsx)(Z,{edit:function(){V(t),K(!0),function(e){var t=(0,o.Z)({},mt).eventos[e];Ze(t.missao.dep),Se(t.missao.pouso),Ie(t.missao.alternativa?t.missao.alternativa:""),mn(t.missao.combustivel_minimo?t.missao.combustivel_minimo:0),"string"==typeof t.missao.depISO&&(t.missao.depISO=new Date(t.missao.depISO)),"string"==typeof t.missao.pousoISO&&(t.missao.pousoISO=new Date(t.missao.pousoISO));var n=t.missao.depISO.getTimezoneOffset();if(t.missao.depISO.setMinutes(t.missao.depISO.getMinutes()+n),t.missao.pousoISO){var a=t.missao.pousoISO.getTimezoneOffset();t.missao.pousoISO.setMinutes(t.missao.pousoISO.getMinutes()+a),He(t.missao.pousoISO)}else En();_e(t.missao.depISO)}(t),Zn.current.scrollTop=0},del:function(){var e=(0,o.Z)({},mt),n=e.eventos.filter((function(e,n){if(n!=t)return e}));e.eventos=n,ft(e)},index:t,dep:e.missao.dep,pouso:e.missao.pouso,alternativa:e.missao.alternativa,horaDep:e.missao.horaDep,horaPouso:e.missao.horaPouso})})),(0,m.jsxs)("div",{className:"add-trip",children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Tripula\xe7\xe3o:"}),(0,m.jsx)(v,{maxLength:3,value:Yt,onChange:Bt,onKeyPress:Cn}),ut&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:ut}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Pilotos:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:n.map((function(e){if("Piloto"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return zn(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Mec\xe2nicos:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:n.map((function(e){if("Mec\xe2nico de Voo"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return zn(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Loadmasters:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:n.map((function(e){if("Loadmaster"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return zn(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Comiss\xe1rios:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:n.map((function(e){if("Comiss\xe1rio"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return zn(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"OE-3:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:n.map((function(e){if("O3"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return zn(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))})]}),(0,m.jsxs)("div",{style:{marginTop:30,display:"flex",flexDirection:"column"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Coment\xe1rios: "}),(0,m.jsx)("textarea",{value:$t,onChange:function(e){return en(e.target.value)},style:{borderRadius:10,padding:5}})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",style:{marginTop:30},children:[(0,m.jsx)("button",{className:"cancelar",style:{fontSize:"1vw"},onClick:Hn,children:"Limpar"}),Et?(0,m.jsx)(b.Z,{}):(0,m.jsx)("button",{className:"adicionar",style:{fontSize:"1vw"},onClick:F?Pn:An,children:F?"Editar Miss\xe3o":"Criar Miss\xe3o"})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",style:{marginTop:30,justifyContent:"center"},children:[Ot&&(0,m.jsx)(b.Z,{}),F?(0,m.jsx)("button",{className:"cancelar",style:{fontSize:"1.3vw"},onClick:Fn,children:"Excluir Miss\xe3o"}):(0,m.jsx)(m.Fragment,{})]})]})]})})}}}]);
//# sourceMappingURL=19.d64431aa.chunk.js.map