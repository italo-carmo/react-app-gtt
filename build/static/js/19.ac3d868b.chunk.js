"use strict";(self.webpackChunkApp_GTT=self.webpackChunkApp_GTT||[]).push([[19],{28050:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(93433),s=a(74165),r=a(15861),o=a(1413),i=a(29439),c=a(72791),u=a(78983),l=a(21933),d=a(59513),p=a.n(d),m=(a(68639),a(80184)),f=function(e){var t=e.maxLength,a=e.value,n=e.onChange,s=e.erro,r=e.onKeyPress,o=e.id,i=void 0===o?"":o;return(0,m.jsx)("input",{type:"text",id:i,value:a,onChange:function(e){var a=e.target.value.toUpperCase().replace(/[^A-Z]/g,"").substring(0,t);n(a)},maxLength:t,style:{border:s?"1px solid #ff0000":"1px solid #000"},onKeyPress:r})},v=function(e){var t=e.maxLength,a=e.value,n=e.onChange,s=e.erro,r=e.onKeyPress;return(0,m.jsx)("input",{type:"text",value:a,onChange:function(e){var a=e.target.value.toUpperCase().replace(/[^A-Z]/g,"").substring(0,t);n(a)},maxLength:t,style:{border:s?"1px solid #ff0000":"1px solid #000"},onKeyPress:r})},h=function(e){var t=e.value,a=e.onChange,n=e.disabled;return(0,m.jsx)("input",{type:"number",value:t,onChange:function(e){var t=e.target.value.toUpperCase().replace(/[^0-9]/g,"").substring(0,5);a(t)},maxLength:5,disabled:n,style:{border:"1px solid #000",backgroundColor:"#fff"}})},x=function(e){var t=e.value,a=e.onChange;return(0,m.jsx)("input",{type:"number",value:t,onChange:function(e){var t=e.target.value.toUpperCase().replace(/[^0-9]/g,"").substring(0,5);a(t)},maxLength:5,style:{border:"1px solid #000"}})},g=a(72426),Z=a.n(g);a(73528);function j(e){var t=e.dep,a=e.pouso,n=e.alternativa,s=e.horaDep,r=e.horaPouso,o=e.index,i=e.edit,c=e.del,u=!1;return t&&a&&n&&s&&r&&""!=t&&""!=a&&""!=n&&""!=s&&""!=r&&(u=!0),(0,m.jsxs)("div",{className:u?"view-etapa complete":"view-etapa",children:[(0,m.jsxs)("div",{className:u?"complete-text":"",style:{color:"#000"},children:[o+1,"- ",s," ",t," - ",r," ",a]}),(0,m.jsxs)("div",{className:"botoes-etapa",children:[(0,m.jsx)("img",{src:u?"https://www.1gtt.com.br/app/pen-white.png":"https://www.1gtt.com.br/app/pen.png",onClick:i,width:20,height:20}),(0,m.jsx)("img",{src:u?"https://www.1gtt.com.br/app/close-white.png":"https://www.1gtt.com.br/app/close.png",onClick:c,width:20,height:20})]})]})}var b=a(5016);Z().tz.setDefault("Etc/UTC");var w=function(){var e=(0,c.useState)([]),t=(0,i.Z)(e,2),a=t[0],d=t[1],g=(0,c.useState)([]),Z=(0,i.Z)(g,2),w=Z[0],y=Z[1],S=(0,c.useState)([]),k=(0,i.Z)(S,2),C=k[0],I=k[1],N=(0,c.useState)(!1),O=(0,i.Z)(N,2),M=O[0],D=O[1],T=(0,c.useState)(!1),E=(0,i.Z)(T,2),L=E[0],_=E[1],A=(0,c.useState)(!1),P=(0,i.Z)(A,2),F=P[0],z=P[1],U=(0,c.useState)(!1),H=(0,i.Z)(U,2),R=H[0],K=H[1],G=(0,c.useState)(!1),B=(0,i.Z)(G,2),Y=B[0],V=B[1],J=(0,c.useState)([]),X=(0,i.Z)(J,2),q=X[0],Q=X[1],W=(0,c.useState)(new Date),$=(0,i.Z)(W,2),ee=$[0],te=$[1],ae=(0,c.useState)(new Date),ne=(0,i.Z)(ae,2),se=ne[0],re=(ne[1],(0,c.useState)({avioes:[]})),oe=(0,i.Z)(re,2),ie=oe[0],ce=oe[1],ue=(0,c.useState)(""),le=(0,i.Z)(ue,2),de=le[0],pe=le[1],me=(0,c.useState)(!1),fe=(0,i.Z)(me,2),ve=fe[0],he=fe[1],xe=(0,c.useState)(""),ge=(0,i.Z)(xe,2),Ze=ge[0],je=ge[1],be=(0,c.useState)(""),we=(0,i.Z)(be,2),ye=we[0],Se=we[1],ke=(0,c.useState)(""),Ce=(0,i.Z)(ke,2),Ie=Ce[0],Ne=Ce[1],Oe=(0,c.useState)(""),Me=(0,i.Z)(Oe,2),De=Me[0],Te=Me[1],Ee=(0,c.useState)(new Date),Le=(0,i.Z)(Ee,2),_e=Le[0],Ae=Le[1],Pe=(0,c.useState)(new Date),Fe=(0,i.Z)(Pe,2),ze=Fe[0],Ue=Fe[1],He=(0,c.useState)(!1),Re=(0,i.Z)(He,2),Ke=Re[0],Ge=Re[1],Be=(0,c.useState)(!1),Ye=(0,i.Z)(Be,2),Ve=Ye[0],Je=Ye[1],Xe=(0,c.useState)(!1),qe=(0,i.Z)(Xe,2),Qe=qe[0],We=qe[1],$e=(0,c.useState)(""),et=(0,i.Z)($e,2),tt=et[0],at=et[1],nt=(0,c.useState)(!1),st=(0,i.Z)(nt,2),rt=st[0],ot=st[1],it=(0,c.useState)(!1),ct=(0,i.Z)(it,2),ut=ct[0],lt=ct[1],dt=(0,c.useState)({aviao:"",eventos:[]}),pt=(0,i.Z)(dt,2),mt=pt[0],ft=pt[1],vt=(0,c.useState)([]),ht=(0,i.Z)(vt,2),xt=ht[0],gt=ht[1],Zt=(0,c.useState)(""),jt=(0,i.Z)(Zt,2),bt=jt[0],wt=jt[1],yt=(0,c.useState)([]),St=(0,i.Z)(yt,2),kt=St[0],Ct=St[1],It=(0,c.useState)(!1),Nt=(0,i.Z)(It,2),Ot=Nt[0],Mt=Nt[1],Dt=(0,c.useState)(!1),Tt=(0,i.Z)(Dt,2),Et=Tt[0],Lt=Tt[1],_t=(0,c.useState)(!1),At=(0,i.Z)(_t,2),Pt=At[0],Ft=At[1],zt=(0,c.useState)(""),Ut=(0,i.Z)(zt,2),Ht=Ut[0],Rt=Ut[1],Kt=(0,c.useState)(""),Gt=(0,i.Z)(Kt,2),Bt=Gt[0],Yt=Gt[1],Vt=(0,c.useState)(""),Jt=(0,i.Z)(Vt,2),Xt=Jt[0],qt=Jt[1],Qt=(0,c.useState)(""),Wt=(0,i.Z)(Qt,2),$t=Wt[0],ea=Wt[1],ta=(0,c.useState)(""),aa=(0,i.Z)(ta,2),na=aa[0],sa=aa[1],ra=(0,c.useState)([]),oa=(0,i.Z)(ra,2),ia=oa[0],ca=oa[1],ua=(0,c.useState)(0),la=(0,i.Z)(ua,2),da=la[0],pa=la[1],ma=(0,c.useState)(!0),fa=(0,i.Z)(ma,2),va=fa[0],ha=fa[1],xa=(0,c.useRef)(null),ga=(0,c.useRef)(null),Za=(0,c.useRef)(null),ja=(0,l.Z)(),ba=function(){D(!1)},wa=function(e){"Enter"===e.key&&(R?Ha():ya())},ya=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra();case 2:e.sent&&setTimeout((function(){var e=document.getElementById("icao-pouso");e&&e.focus()}),0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sa=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lt(!1),"Enter"!==t.key){e.next=8;break}return r=(0,n.Z)(a),e.next=5,ja.getTrigrama(Bt);case 5:o=e.sent,console.log(o),o.error?lt(o.error):(r.push({id:o.data.id_user,trigrama:o.data.trigrama,funcao:o.data.Usuario.FuncoesAbordo.nome}),d(r),Yt(""));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ka=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new Date(e);a.setDate(a.getDate()-1);for(var n=[],s=0;s<=6;s++){if(0!=s)var r=a.setDate(a.getDate()+1);else r=a.setDate(a.getDate());var o=new Date(r),i=o.getDate(),c=o.getMonth()+1;i<=9&&(i="0"+i),c<=9&&(c="0"+c);var u=i+"/"+c+"/"+o.getFullYear();n.push(u)}Q(n),Na(n,t)},Ca=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja.getOfrags();case 2:(t=e.sent).error||ca(t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ia=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(""),at(""),""!=xt){e.next=5;break}return at("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 5:if(!F){e.next=8;break}return at("Exclua essa OMIS e crie outra para cumprir com OFRAG"),e.abrupt("return");case 8:if(""==na){e.next=13;break}return e.next=11,ja.getOfrag(na);case 11:(t=e.sent).error||(a=[],n=(0,o.Z)({},ie),t.data.missoes[0].rotaOfrag.etapas.forEach((function(e){var t=e.dataHoraDecolagem.split("T"),s=(0,i.Z)(t,2),r=s[0],o=s[1],c=r.split("-"),u=(0,i.Z)(c,3),l=u[0],d=u[1],p=u[2],m=o.split(":"),f=(0,i.Z)(m,3),v=f[0],h=f[1];f[2];if(e.dataHoraPouso){var x=e.dataHoraPouso.split("T"),g=(0,i.Z)(x,2),Z=g[0],j=g[1],b=Z.split("-"),w=(0,i.Z)(b,3),y=(w[0],w[1],w[2],j.split(":")),S=(0,i.Z)(y,3),k=S[0],C=S[1];S[2]}var I={data:"".concat(p,"/").concat(d,"/").concat(l),tipo:"missao",missao:{id:Math.floor(1e4*Math.random())+1,dep:e.codigoIcaoOrigem,horaDep:"".concat(v,":").concat(h,"Z"),pouso:e.codigoIcaoDestino,horaPouso:e.dataHoraPouso?"".concat(k,":").concat(C,"Z"):"",depISO:e.dataHoraDecolagem,pousoISO:e.dataHoraPouso,tripulacao:[],omis:"",edicao:!0},manutencao:null},N=n.avioes.findIndex((function(e){return e.aviao==xt}));N>=0&&n.avioes[N].eventos.push(I),a.push(I)})),a.length>0&&((r=(0,o.Z)({},mt)).eventos=a,ft(r),Te(""),Ft(!1),ot(!0),ce(n)));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Na=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var a,n,r,o,i,c,u=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]&&u[1],n=t[0],r=t[6],e.next=5,ja.getMissoesAvioes({inicio:n,fim:r});case 5:(o=e.sent).error||(i=o.data,a||mt.eventos.length>0&&(c=i.findIndex((function(e){return e.aviao==xt})))>=0&&mt.eventos.forEach((function(e){i[c].eventos.push(e)})),ce({avioes:i}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oa=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja.getAeronaves();case 2:(t=e.sent).error||Ct(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ma=function(e,t){var a=new Date(ee);t?a.setDate(a.getDate()-e):a.setDate(a.getDate()+e),te(a)},Da=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mt(!1),Lt(!1),z(!1),_(!0),e.next=6,ja.getUltimaMissao();case 6:(t=e.sent).error||qt((parseInt(t.data[0].numero)+1).toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ta=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,n,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==_e||""==ze||4!=Ze.length||4!=ye.length){e.next=9;break}return Ge(!1),Je(!1),We(!1),Te(""),e.next=7,ja.getDistanciaAerodromos({origem:Ze,destino:ye});case 7:(t=e.sent).error?(o=t.error,Te(t.error),o.includes(Ze)&&Ge(!0),o.includes(ye)&&Je(!0)):(a=t.data.distancia,n=Math.round(60*a/400),n=5*Math.ceil(n/5),(r=new Date(_e)).setMinutes(r.getMinutes()+n),Ue(r));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ea=function(e,t){Se(""),Ne(""),pa(0);var a=new Date(t);a.setMinutes(a.getMinutes()+120);var n=a.getTimezoneOffset();a.setMinutes(a.getMinutes()+n),Ae(a),je(e),Ue(a),ga.current&&xa.current.focus()},La=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,o,i,c,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lt(!0),""!=xt&&0!=mt.eventos.length){e.next=5;break}return alert("Todos os campos s\xe3o obrigat\xf3rios!"),Lt(!1),e.abrupt("return");case 5:if(t=!1,mt.eventos.forEach((function(e){e.missao.pousoISO&&e.missao.depISO&&e.missao.alternativa&&""!=e.missao.alternativa||(t=!0)})),!t){e.next=11;break}return Lt(!1),alert("Hor\xe1rios de DEP e POUSO e ICAO de ALTERNATIVA s\xe3o obrigat\xf3rios!"),e.abrupt("return");case 11:if(F){e.next=31;break}return n={},""!=Xt&&(n.numero=Xt),""!=na&&(n.id_documento=na),e.next=17,ja.createMissao(n);case 17:if((o=e.sent).error){e.next=29;break}return i=o.data.id,mt.eventos.forEach(function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t,a){var n,r,c,u,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja.getAerodromo(t.missao.dep);case 2:return n=e.sent,e.next=5,ja.getAerodromo(t.missao.pouso);case 5:if(r=e.sent,c=0,u=null,!t.missao.alternativa){e.next=17;break}return e.next=11,ja.getAerodromo(t.missao.alternativa);case 11:return l=e.sent,u=l.data.id,e.next=15,ja.getCombMinimo(t.missao.dep,t.missao.pouso,t.missao.alternativa);case 15:e.sent.error||(c=o.data.combustivel);case 17:return d={dep:t.missao.depISO,pouso:t.missao.pousoISO,id_missao:i,id_aeronave:bt,id_dep:n.data.id,id_pouso:r.data.id,id_alternativa:u,combustivel_minimo:""!=t.missao.combustivel_minimo?t.missao.combustivel_minimo:c},e.next=20,ja.createEtapa(d);case 20:if(!e.sent.error){e.next=26;break}return alert(o.etapa.error),e.abrupt("return");case 26:a==mt.eventos.length-1&&(_(!1),Lt(!1),setTimeout((function(){window.location="https://app.1gtt.com.br"}),"2000"));case 27:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),c=[],a.forEach((function(e){c.push(e.id)})),u={id_missao:i,id_militares:c},e.next=26,ja.createEscala(u);case 26:Lt(!1),e.next=31;break;case 29:Lt(!1),alert(o.error);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_a=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,n,o,c,u,l,d,p,m,f,v;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=function(e){var t=e%60,a=Math.floor(e/60).toString().padStart(2,"0"),n=t.toString().padStart(2,"0");return"".concat(a,":").concat(n)},l=function(){return(l=(0,r.Z)((0,s.Z)().mark((function e(){var t,r,u,l,d,p,m,f,v,h,x,g,Z,j,b,w,y;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0,t=0;case 2:if(!(t<mt.eventos.length)){e.next=19;break}return r=mt.eventos[t],u="01:00",t!=mt.eventos.length-1&&(l=mt.eventos[t+1].missao.depISO,(d=new Date(l)-new Date(r.missao.pousoISO))<288e5&&(u=c(d))),p=n(r.missao.depISO),m=(0,i.Z)(p,2),f=m[0],v=m[1],h=n(r.missao.pousoISO),x=(0,i.Z)(h,2),x[0],g=x[1],Z=c(new Date(r.missao.pousoISO)-new Date(r.missao.depISO)),j="00:00",e.next=12,ja.getDistanciaAerodromos({origem:r.missao.pouso,destino:r.missao.alternativa});case 12:(b=e.sent).error||(w=b.data.distancia,j=o(w)),y={data:f,depIso:r.missao.depISO,horaDep:v,dep:r.missao.dep,horaPouso:g,pouso:r.missao.pouso,tev:Z,solo:u,alternativa:r.missao.alternativa,tev_alt:j,combustivel:r.missao.combustivel_minimo},a.push(y);case 16:t++,e.next=2;break;case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(){return l.apply(this,arguments)},c=function(e){var t=Math.floor(e/36e5);t<=9&&(t="0"+t.toString());var a=Math.ceil(e%36e5/6e4);return a<=9&&(a="0"+a.toString()),t+":"+a},o=function(e){var t=e/400,a=Math.round(t%1*60);60===(a=5*Math.ceil(a/5))&&(t+=1,a=0);var n=Math.floor(t);return n<=9&&(n="0"+n.toString()),n+":"+(a<10?"0"+a:a)},t=[],console.log(mt),mt.eventos[0].missao.tripulacao.forEach((function(e){t.push(e)})),a=[],n=function(e){var t=e.split("T"),a=(0,i.Z)(t,2),n=a[0],s=a[1],r=n.split("-"),o=(0,i.Z)(r,3),c=o[0],u=o[1],l=o[2],d=s.split(":"),p=(0,i.Z)(d,3),m=p[0],f=p[1];p[2];return[l+"/"+u+"/"+c,m+":"+f]},e.next=12,u();case 12:t.sort((function(e,t){return e.antiguidade-t.antiguidade})),d=0,a.forEach((function(e){var t=e.tev.split(":"),a=(0,i.Z)(t,2),n=a[0],s=a[1],r=60*parseInt(n)+parseInt(s);d+=r})),m={tripulacao:t,etapas:a,comandante:t[0].posto+" "+t[0].nome_guerra.toUpperCase(),data:a[0].data,aviao:xt,omis:mt.eventos[0].omis,ofrag:mt.eventos[0].ofrag,horas:p(d)},f=encodeURIComponent(JSON.stringify(m)),v="/omis?dados=".concat(f),window.open(v,"_blank");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Aa=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t,a,n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,a,n),""==t||""==a||""==n||4!=t.length||4!=a.length||4!=n.length){e.next=6;break}return e.next=4,ja.getCombMinimo({dep:t,pouso:a,alternativa:n});case 4:(r=e.sent).error||pa(r.data.combustivel);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Pa=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,o,i,c,u,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lt(!0),t=Ht,""==Xt){e.next=8;break}return n={numero:Xt},""!=na&&(n.id_documento=na),""!=$t&&(n.comentarios=$t),e.next=8,ja.updateMissao(n,t);case 8:return o=mt.eventos.map(function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var a,n,r,o,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,ja.getAerodromo(t.missao.dep);case 3:return n=e.sent,e.next=6,ja.getAerodromo(t.missao.pouso);case 6:if(r=e.sent,o=null,!t.missao.alternativa){e.next=13;break}return e.next=11,ja.getAerodromo(t.missao.alternativa);case 11:i=e.sent,o=i.data.id;case 13:return a.dep=t.missao.depISO,a.pouso=t.missao.pousoISO,a.id_aeronave=bt,a.id_dep=n.data.id,a.id_pouso=r.data.id,a.id_alternativa=o,a.combustivel_minimo=t.missao.combustivel_minimo,t.missao.edicao?a.id=null:a.id=t.missao.id,e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,Promise.all(o);case 11:return i=e.sent,c={etapas:i,id_missao:t},e.next=15,ja.updateEtapas(c);case 15:if(!(u=e.sent).error){e.next=22;break}return Lt(!1),alert(u.error),e.abrupt("return");case 22:return l=[],a.forEach((function(e){l.push(e.id)})),d={id_missao:t,id_militares:l},e.next=27,ja.updateEscala(d);case 27:Ua(),_(!1),ka(ee,!0);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fa=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mt(!0),!window.confirm("Deseja mesmo excluir essa miss\xe3o?")){e.next=16;break}return t=mt.eventos[0].missao.id_missao,e.next=6,ja.deleteMissao(t);case 6:if(!(a=e.sent).error){e.next=11;break}return Mt(!1),alert(a.error),e.abrupt("return");case 11:Mt(!1),ce({avioes:[]}),Ua(),_(!1),ka(ee,!0);case 16:Mt(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),za=function(e){var t=(0,n.Z)(a);t=t.filter((function(t){if(t.id!=e)return t})),d(t)},Ua=function(){ft({aviao:"",eventos:[]});var e=(0,o.Z)({},ie);ce(e),Se(""),je(""),Ne(""),Ae(new Date),Ue(new Date),gt(""),ea(""),qt(""),sa(""),z(!1),K(!1),d([]),pa(0),ka(ee,!0)},Ha=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,n,r,c,u,l,d,p,m,f,v,h,x,g,Z,j,b,w,y,S,k,C,I,N,O,M,D,T,E,L,_,A;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(""),""!=ye&&""!=Ze&&""!=Ie&&""!=_e&&""!=ze){e.next=4;break}return Te("Todos os campos s\xe3o obrigat\xf3rios"),e.abrupt("return");case 4:if(""!=xt){e.next=7;break}return Te("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 7:return e.next=9,ja.getAerodromo(Ie);case 9:if(!(t=e.sent).error){e.next=14;break}return Te(t.error),We(!0),e.abrupt("return");case 14:We(!1),a=_e.getTimezoneOffset(),_e.setMinutes(_e.getMinutes()-a),n=ze.getTimezoneOffset(),ze.setMinutes(ze.getMinutes()-n),r=_e.toISOString(),c=ze.toISOString(),u=r.split("T"),l=(0,i.Z)(u,2),d=l[0],p=l[1],m=c.split("T"),f=(0,i.Z)(m,2),f[0],v=f[1],h=d.split("-"),x=(0,i.Z)(h,3),g=x[0],Z=x[1],j=x[2],b=p.split(":"),w=(0,i.Z)(b,3),y=w[0],S=w[1],w[2],k=v.split(":"),C=(0,i.Z)(k,3),I=C[0],N=C[1],C[2],O=(0,o.Z)({},mt),M=(0,o.Z)({},ie),D=O.eventos[Y],T={data:"".concat(j,"/").concat(Z,"/").concat(g),tipo:"missao",missao:{id:D.missao.id,dep:Ze,horaDep:"".concat(y,":").concat(S,"Z"),pouso:ye,horaPouso:"".concat(I,":").concat(N,"Z"),alternativa:Ie,depISO:_e,pousoISO:ze,tripulacao:[],omis:"",combustivel_minimo:da,edicao:D.missao.edicao},manutencao:null},O.eventos[Y]=T,ft(O),(E=M.avioes.findIndex((function(e){return e.aviao==xt})))>=0&&(L=M.avioes[E].eventos.findIndex((function(e){return e.missao.id==D.missao.id})))>=0&&(M.avioes[E].eventos[L]=T,ce(M)),_=O.eventos[O.eventos.length-1].missao.pouso,A=O.eventos[O.eventos.length-1].missao.pousoISO,K(!1),V(""),Ea(_,A);case 39:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ra=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,a,n,r,c,u,l,d,p,m,f,v,h,x,g,Z,j,b,w,y,S,k,C,I,N,O,M,D,T;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(""),""!=ye&&""!=Ze&&""!=Ie&&""!=_e&&""!=ze){e.next=4;break}return Te("Todos os campos s\xe3o obrigat\xf3rios"),e.abrupt("return");case 4:if(""!=xt){e.next=7;break}return Te("A aeronave \xe9 obrigat\xf3ria"),e.abrupt("return");case 7:return e.next=9,ja.getAerodromo(Ie);case 9:if(!(t=e.sent).error){e.next=14;break}return Te(t.error),We(!0),e.abrupt("return",null);case 14:return We(!1),Je(!1),a=_e.getTimezoneOffset(),_e.setMinutes(_e.getMinutes()-a),n=ze.getTimezoneOffset(),ze.setMinutes(ze.getMinutes()-n),r=_e.toISOString(),c=ze.toISOString(),u=r.split("T"),l=(0,i.Z)(u,2),d=l[0],p=l[1],m=c.split("T"),f=(0,i.Z)(m,2),f[0],v=f[1],h=d.split("-"),x=(0,i.Z)(h,3),g=x[0],Z=x[1],j=x[2],b=p.split(":"),w=(0,i.Z)(b,3),y=w[0],S=w[1],w[2],k=v.split(":"),C=(0,i.Z)(k,3),I=C[0],N=C[1],C[2],O={data:"".concat(j,"/").concat(Z,"/").concat(g),tipo:"missao",missao:{id:Math.floor(1e4*Math.random())+1,dep:Ze,horaDep:"".concat(y,":").concat(S,"Z"),pouso:ye,horaPouso:"".concat(I,":").concat(N,"Z"),alternativa:Ie,depISO:_e,pousoISO:ze,tripulacao:[],omis:"",combustivel_minimo:da,edicao:!0},manutencao:null},(M=(0,o.Z)({},mt)).eventos.push(O),D=(0,o.Z)({},ie),(T=D.avioes.findIndex((function(e){return e.aviao==xt})))>=0&&D.avioes[T].eventos.push(O),ce(D),ft(M),Ea(ye,ze),e.abrupt("return",!0);case 37:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){!function(){if(mt.eventos.length>0){var e=(0,o.Z)({},ie);e.avioes.forEach((function(t,a){if(t.eventos.length>0){var n=t.eventos.filter((function(e){if(mt.eventos.findIndex((function(t){return t.missao.id==e.missao.id}))<0)return e}));e.avioes[a].eventos=n}}));var t=e.avioes.findIndex((function(e){return e.aviao==xt}));t>=0&&mt.eventos.forEach((function(a){e.avioes[t].eventos.push(a)})),ce(e)}}()}),[xt]),(0,c.useEffect)((function(){Ta()}),[ye,Ze,_e]),(0,c.useEffect)((function(){Aa(Ze,ye,Ie)}),[ye,Ze,Ie]),(0,c.useEffect)((function(){Oa(),Ca()}),[]),(0,c.useEffect)((function(){ka(ee)}),[ee]);var Ka=(0,c.forwardRef)((function(e,t){e.value;var a=e.onClick;return(0,m.jsx)("button",{className:"calendario",onClick:a,ref:t,children:ee.toLocaleString("pt-BR",{month:"long"}).toUpperCase()+"/"+ee.getFullYear()})})),Ga=function(e){e.value;var t=e.onClick;return(0,m.jsx)("button",{className:"calendario",onClick:t,children:"+"})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(u.xH,{className:"mb-6",style:{flexDirection:"column"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:10},children:[(0,m.jsx)("div",{className:"",children:(0,m.jsx)(p(),{selected:ee,timeInputLabel:ee.toLocaleString("pt-BR",{month:"long"}).toUpperCase()+"/"+ee.getFullYear(),onChange:function(e){return te(e)},customInput:(0,m.jsx)(Ka,{})})}),(0,m.jsxs)("div",{className:"botoes",children:[(0,m.jsx)("button",{className:"calendario",onClick:function(){return Ma(7,!0)},children:"<<"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Ma(1,!0)},children:"<"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){te(se)},children:"HOJE"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Ma(1,!1)},children:">"}),(0,m.jsx)("button",{className:"calendario",onClick:function(){return Ma(7,!1)},children:">>"})]}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{onClick:Da,className:"criar",children:"Criar Miss\xe3o"})})]}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[(0,m.jsxs)("div",{className:"topo",children:[(0,m.jsx)("div",{className:"missao",children:"Avi\xe3o"}),q.map((function(e,t){var a=se.getDate(),n=se.getMonth()+1;a<=9&&(a="0"+a),n<=9&&(n="0"+n);var s=a+"/"+n+"/"+se.getFullYear();return(0,m.jsx)("div",{className:"missao",style:{backgroundColor:s==e?"#46a31d":"#000"},children:e})}))]}),(0,m.jsx)("div",{className:"missoes",children:ie.avioes.length>0&&ie.avioes.map((function(e){return(0,m.jsxs)("div",{className:"missao-item",children:[(0,m.jsx)("div",{className:"missao aviao",children:e.aviao}),q.map((function(t){return(0,m.jsx)("div",{className:"item-missao",children:e.eventos.length>0&&e.eventos.map((function(a){if(a.data==t)return(0,m.jsxs)("div",{onClick:function(){return function(e){Mt(!1),Lt(!1),z(!0),K(!1);var t=e.eventos[0].missao.id_missao;Rt(t),sa(e.eventos[0].id_documento);var a=(0,o.Z)({},mt),n=[];e.eventos[0].missao.tripulacao.forEach((function(e){n.push(e)}));var s=e.eventos[0].comentarios;ea(s);var r=e.eventos[0].missao.omis;qt(r),d(n),a.eventos=e.eventos,ft(a),_(!0),gt(e.aviao);var i=kt.findIndex((function(t){return t.aeronave==e.aviao}));i>=0&&wt(kt[i].id)}(e)},className:"missao-white white",onMouseEnter:function(){return function(e,t){I(e);var a=t.tripulacao.map((function(e){return e.trigrama}));y(a.join("/")),pe(t),D(!0)}(a.missao.id,a.missao)},onMouseLeave:ba,children:[M&&C==a.missao.id&&null!=a.missao.id&&(0,m.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",background:"#000",color:"#fff",padding:"10px",border:"1px solid black",zIndex:1},children:[(0,m.jsxs)("p",{style:{fontSize:"1vw"},children:["OMIS: ",de.omis]}),(0,m.jsxs)("p",{style:{fontSize:"1vw"},children:["Tripula\xe7\xe3o: ",w]})]}),(0,m.jsxs)("div",{className:"text-missao",children:[a.missao.horaDep," ",a.missao.dep]}),(0,m.jsxs)("div",{className:"text-missao",children:[a.missao.horaPouso," ",a.missao.pouso," "]})]})}))})}))]})}))})]}),(0,m.jsxs)("div",{ref:Za,className:L?"modal-create-visible":"modal-create",children:[(0,m.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",margin:10,cursor:"pointer"},children:(0,m.jsx)("div",{onClick:function(){window.confirm("Deseja mesmo sair? Todos os dados adicionados at\xe9 o momento ser\xe3o perdidos")&&(Ua(),_(!1))},style:{color:"#fff"},children:"X"})}),(0,m.jsxs)("div",{className:"criar-div",children:[(0,m.jsxs)("h3",{style:{color:"#fff"},children:[F?"Editar":"Criar"," Miss\xe3o"]}),F?(0,m.jsx)("button",{onClick:_a,children:"Ver OMIS"}):null]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Avi\xe3o:"}),kt.map((function(e){return(0,m.jsx)("button",{onClick:function(){gt(e.aeronave),wt(e.id);var t=(0,o.Z)({},mt);t.aviao=e.aeronave,ft(t)},style:{backgroundColor:xt==e.aeronave?"#28a745":"#FFF",color:xt==e.aeronave?"#fff":"#000"},className:"botao-aviao",children:e.aeronave})}))]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"OMIS:"}),(0,m.jsxs)("div",{style:{color:"#fff"},children:[(0,m.jsx)(h,{value:Xt,onChange:qt,disabled:va}),va&&(0,m.jsx)("button",{onClick:function(){return ha(!1)},className:"cumprir",children:"Editar"}),!va&&(0,m.jsx)("button",{onClick:function(){return ha(!0)},className:"cumprir",children:"Salvar N\xfamero"})]})]}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20,alignItems:"center"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"OFRAG:"}),(0,m.jsxs)("div",{style:{color:"#fff"},children:[(0,m.jsxs)("select",{id:"select-box",style:{borderRadius:5},value:na,onChange:function(e){sa(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"Selecione uma op\xe7\xe3o"}),ia.length>0?ia.map((function(e,t){return(0,m.jsx)("option",{style:{backgroundColor:"#fff"},value:e.id,children:e.numero},t)})):null]}),""==na||F||rt?null:Pt?(0,m.jsx)(b.Z,{}):(0,m.jsx)("button",{onClick:Ia,className:"cumprir",children:"Cumprir"}),""!=tt&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:tt})]})]}),(0,m.jsxs)("div",{className:"add-etapa",children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Etapas:"}),(0,m.jsx)("img",{onClick:function(){if(!R&&ve&&he(!1),!R&&!ve&&(he(!0),mt.eventos.length>0)){var e=mt.eventos[mt.eventos.length-1].missao.pouso,t=mt.eventos[mt.eventos.length-1].missao.pousoISO;Ea(e,t)}R&&K(!1)},style:{cursor:"pointer"},src:"https://www.1gtt.com.br/app/add-white.png",width:20,height:20})]}),(ve||R)&&(0,m.jsxs)("div",{className:"form-area",children:[(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"DEP: "}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[_e.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"})+"Z",(0,m.jsx)("div",{className:"",style:{marginLeft:10},children:(0,m.jsx)(p(),{selected:_e,timeInputLabel:_e,onChange:function(e){Ae(e)},customInput:(0,m.jsx)(Ga,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"LLL",timeZone:"Etc/UTC",timeZoneData:[{value:"Etc/UTC",label:"Zulu (GMT 0)"}]})})]})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Origem: "}),(0,m.jsx)(f,{erro:Ke,maxLength:4,value:Ze,onChange:je})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Destino: "}),(0,m.jsx)(f,{ref:xa,id:"icao-pouso",onKeyPress:wa,erro:Ve,maxLength:4,value:ye,onChange:Se})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"ICAO de Alternativa: "}),(0,m.jsx)(f,{ref:ga,onKeyPress:wa,erro:Qe,maxLength:4,value:Ie,onChange:Ne})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"Pouso: "}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[ze.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"})+"Z",(0,m.jsx)("div",{className:"",style:{marginLeft:10},children:(0,m.jsx)(p(),{selected:ze,timeInputLabel:ze,onChange:function(e){Ue(e)},customInput:(0,m.jsx)(Ga,{}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"LLL"})})]})]}),(0,m.jsxs)("div",{className:"form-add",children:[(0,m.jsx)("span",{style:{color:"#000"},children:"COMB M\xednimo: "}),(0,m.jsx)(x,{onKeyPress:wa,value:da,onChange:pa})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",children:[(0,m.jsx)("button",{onClick:function(){je(""),Se(""),Ae(""),Ue(""),he(!1),K(!1)},className:"cancelar",children:"Cancelar"}),(0,m.jsx)("button",{className:"adicionar",onClick:R?Ha:Ra,children:R?"Editar":"Adicionar"})]}),""!=De&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:De})]}),mt.eventos.map((function(e,t){return(0,m.jsx)(j,{edit:function(){V(t),K(!0),function(e){var t=(0,o.Z)({},mt).eventos[e];je(t.missao.dep),Se(t.missao.pouso),Ne(t.missao.alternativa?t.missao.alternativa:""),pa(t.missao.combustivel_minimo?t.missao.combustivel_minimo:0),"string"==typeof t.missao.depISO&&(t.missao.depISO=new Date(t.missao.depISO)),"string"==typeof t.missao.pousoISO&&(t.missao.pousoISO=new Date(t.missao.pousoISO));var a=t.missao.depISO.getTimezoneOffset();if(t.missao.depISO.setMinutes(t.missao.depISO.getMinutes()+a),t.missao.pousoISO){var n=t.missao.pousoISO.getTimezoneOffset();t.missao.pousoISO.setMinutes(t.missao.pousoISO.getMinutes()+n),Ue(t.missao.pousoISO)}else Ta();Ae(t.missao.depISO)}(t),Za.current.scrollTop=0},del:function(){var e=(0,o.Z)({},mt),a=e.eventos.filter((function(e,a){if(a!=t)return e}));e.eventos=a,ft(e)},index:t,dep:e.missao.dep,pouso:e.missao.pouso,alternativa:e.missao.alternativa,horaDep:e.missao.horaDep,horaPouso:e.missao.horaPouso})})),(0,m.jsxs)("div",{className:"add-trip",children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Tripula\xe7\xe3o:"}),(0,m.jsx)(v,{maxLength:3,value:Bt,onChange:Yt,onKeyPress:Sa}),ut&&(0,m.jsx)("div",{style:{marginTop:10},class:"alert alert-danger",role:"alert",children:ut}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Pilotos:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:a.map((function(e){if("Piloto"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return za(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Mec\xe2nicos:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:a.map((function(e){if("Mec\xe2nico de Voo"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return za(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Loadmasters:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:a.map((function(e){if("Loadmaster"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return za(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"Comiss\xe1rios:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:a.map((function(e){if("Comiss\xe1rio"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return za(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))}),(0,m.jsx)("div",{className:"tripulante-row",children:(0,m.jsx)("span",{style:{color:"#fff"},className:"tripulante",children:"OE-3:"})}),(0,m.jsx)("div",{className:"caixa-tripulante",children:a.map((function(e){if("O3"==e.funcao)return(0,m.jsxs)("div",{className:"tripulante-item",children:[e.trigrama,(0,m.jsx)("img",{style:{marginLeft:5,cursor:"pointer"},onClick:function(){return za(e.id)},src:"https://www.1gtt.com.br/app/close.png",width:"15px"})]})}))})]}),(0,m.jsxs)("div",{style:{marginTop:30,display:"flex",flexDirection:"column"},children:[(0,m.jsx)("span",{style:{color:"#fff"},children:"Coment\xe1rios: "}),(0,m.jsx)("textarea",{value:$t,onChange:function(e){return ea(e.target.value)},style:{borderRadius:10,padding:5}})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",style:{marginTop:30},children:[(0,m.jsx)("button",{className:"cancelar",style:{fontSize:"1vw"},onClick:Ua,children:"Limpar"}),Et?(0,m.jsx)(b.Z,{}):(0,m.jsx)("button",{className:"adicionar",style:{fontSize:"1vw"},onClick:F?Pa:La,children:F?"Editar Miss\xe3o":"Criar Miss\xe3o"})]}),(0,m.jsxs)("div",{className:"botoes-add-etapa",style:{marginTop:30,justifyContent:"center"},children:[Ot&&(0,m.jsx)(b.Z,{}),F?(0,m.jsx)("button",{className:"cancelar",style:{fontSize:"1.3vw"},onClick:Fa,children:"Excluir Miss\xe3o"}):(0,m.jsx)(m.Fragment,{})]})]})]})})}}}]);
//# sourceMappingURL=19.ac3d868b.chunk.js.map